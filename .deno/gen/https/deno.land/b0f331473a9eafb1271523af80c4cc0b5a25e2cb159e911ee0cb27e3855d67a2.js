import { ChannelTypes } from "../../../deps.ts";
import { requireBotChannelPermissions } from "../../permissions.ts";
export default function removeThreadMember(bot) {
    const removeThreadMemberOld = bot.helpers.removeThreadMember;
    bot.helpers.removeThreadMember = async function (threadId, userId) {
        if (userId === bot.id) {
            throw new Error("To remove the bot from a thread, you must use bot.helpers.leaveThread()");
        }
        const channel = bot.channels.get(threadId);
        if (channel) {
            if (channel.archived) {
                throw new Error("Cannot remove user from thread if thread is archived.");
            }
            if (!(bot.id === channel.ownerId &&
                channel.type === ChannelTypes.GuildPrivateThread)) {
                await requireBotChannelPermissions(bot, channel, ["MANAGE_MESSAGES"]);
            }
        }
        return await removeThreadMemberOld(threadId, userId);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVtb3ZlVGhyZWFkTWVtYmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVtb3ZlVGhyZWFkTWVtYmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBZ0IsWUFBWSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDOUQsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFcEUsTUFBTSxDQUFDLE9BQU8sVUFBVSxrQkFBa0IsQ0FBQyxHQUFpQjtJQUMxRCxNQUFNLHFCQUFxQixHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUM7SUFFN0QsR0FBRyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLFdBQVcsUUFBUSxFQUFFLE1BQU07UUFDL0QsSUFBSSxNQUFNLEtBQUssR0FBRyxDQUFDLEVBQUUsRUFBRTtZQUNyQixNQUFNLElBQUksS0FBSyxDQUNiLHlFQUF5RSxDQUMxRSxDQUFDO1NBQ0g7UUFFRCxNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUUzQyxJQUFJLE9BQU8sRUFBRTtZQUNYLElBQUksT0FBTyxDQUFDLFFBQVEsRUFBRTtnQkFDcEIsTUFBTSxJQUFJLEtBQUssQ0FDYix1REFBdUQsQ0FDeEQsQ0FBQzthQUNIO1lBRUQsSUFDRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQUMsT0FBTztnQkFDMUIsT0FBTyxDQUFDLElBQUksS0FBSyxZQUFZLENBQUMsa0JBQWtCLENBQUMsRUFDbkQ7Z0JBQ0EsTUFBTSw0QkFBNEIsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO2FBQ3ZFO1NBQ0Y7UUFFRCxPQUFPLE1BQU0scUJBQXFCLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZELENBQUMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3RXaXRoQ2FjaGUsIENoYW5uZWxUeXBlcyB9IGZyb20gXCIuLi8uLi8uLi9kZXBzLnRzXCI7XG5pbXBvcnQgeyByZXF1aXJlQm90Q2hhbm5lbFBlcm1pc3Npb25zIH0gZnJvbSBcIi4uLy4uL3Blcm1pc3Npb25zLnRzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlbW92ZVRocmVhZE1lbWJlcihib3Q6IEJvdFdpdGhDYWNoZSkge1xuICBjb25zdCByZW1vdmVUaHJlYWRNZW1iZXJPbGQgPSBib3QuaGVscGVycy5yZW1vdmVUaHJlYWRNZW1iZXI7XG5cbiAgYm90LmhlbHBlcnMucmVtb3ZlVGhyZWFkTWVtYmVyID0gYXN5bmMgZnVuY3Rpb24gKHRocmVhZElkLCB1c2VySWQpIHtcbiAgICBpZiAodXNlcklkID09PSBib3QuaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUbyByZW1vdmUgdGhlIGJvdCBmcm9tIGEgdGhyZWFkLCB5b3UgbXVzdCB1c2UgYm90LmhlbHBlcnMubGVhdmVUaHJlYWQoKVwiLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFubmVsID0gYm90LmNoYW5uZWxzLmdldCh0aHJlYWRJZCk7XG5cbiAgICBpZiAoY2hhbm5lbCkge1xuICAgICAgaWYgKGNoYW5uZWwuYXJjaGl2ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiQ2Fubm90IHJlbW92ZSB1c2VyIGZyb20gdGhyZWFkIGlmIHRocmVhZCBpcyBhcmNoaXZlZC5cIixcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAhKGJvdC5pZCA9PT0gY2hhbm5lbC5vd25lcklkICYmXG4gICAgICAgICAgY2hhbm5lbC50eXBlID09PSBDaGFubmVsVHlwZXMuR3VpbGRQcml2YXRlVGhyZWFkKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IHJlcXVpcmVCb3RDaGFubmVsUGVybWlzc2lvbnMoYm90LCBjaGFubmVsLCBbXCJNQU5BR0VfTUVTU0FHRVNcIl0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCByZW1vdmVUaHJlYWRNZW1iZXJPbGQodGhyZWFkSWQsIHVzZXJJZCk7XG4gIH07XG59XG4iXX0=