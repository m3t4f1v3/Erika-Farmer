import { Collection } from "../../../util/collection.ts";
export async function getScheduledEventUsers(bot, guildId, eventId, options) {
    let url = bot.constants.routes.GUILD_SCHEDULED_EVENT_USERS(guildId, eventId, options);
    if (options) {
        url = "?";
        if (options.limit) url += `limit=${options.limit}`;
        if (options.withMember) url += `&with_member=${options.withMember}`;
        if (options.after) url += `&after=${options.after}`;
        if (options.before) url += `&before=${options.before}`;
    }
    const result = await bot.rest.runMethod(bot.rest, "GET", url);
    if (!options?.withMember) {
        return new Collection(result.map((res)=>{
            const user = bot.transformers.user(bot, res.user);
            return [
                user.id,
                user
            ];
        }));
    }
    return new Collection(result.map((res)=>{
        const user = bot.transformers.user(bot, res.user);
        const member = bot.transformers.member(bot, res.member, guildId, user.id);
        return [
            user.id,
            {
                member,
                user
            }
        ];
    }));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3QgfSBmcm9tIFwiLi4vLi4vLi4vYm90LnRzXCI7XG5pbXBvcnQgeyBNZW1iZXIsIFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vdHJhbnNmb3JtZXJzL21lbWJlci50c1wiO1xuaW1wb3J0IHsgRGlzY29yZE1lbWJlciwgRGlzY29yZFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXMvZGlzY29yZC50c1wiO1xuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NvbGxlY3Rpb24udHNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNjaGVkdWxlZEV2ZW50VXNlcnMoXG4gIGJvdDogQm90LFxuICBndWlsZElkOiBiaWdpbnQsXG4gIGV2ZW50SWQ6IGJpZ2ludCxcbiAgb3B0aW9ucz86IEdldFNjaGVkdWxlZEV2ZW50VXNlcnMgJiB7IHdpdGhNZW1iZXI/OiBmYWxzZSB9LFxuKTogUHJvbWlzZTxDb2xsZWN0aW9uPGJpZ2ludCwgVXNlcj4+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNjaGVkdWxlZEV2ZW50VXNlcnMoXG4gIGJvdDogQm90LFxuICBndWlsZElkOiBiaWdpbnQsXG4gIGV2ZW50SWQ6IGJpZ2ludCxcbiAgb3B0aW9ucz86IEdldFNjaGVkdWxlZEV2ZW50VXNlcnMgJiB7IHdpdGhNZW1iZXI6IHRydWUgfSxcbik6IFByb21pc2U8Q29sbGVjdGlvbjxiaWdpbnQsIHsgdXNlcjogVXNlcjsgbWVtYmVyOiBNZW1iZXIgfT4+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNjaGVkdWxlZEV2ZW50VXNlcnMoXG4gIGJvdDogQm90LFxuICBndWlsZElkOiBiaWdpbnQsXG4gIGV2ZW50SWQ6IGJpZ2ludCxcbiAgb3B0aW9ucz86IEdldFNjaGVkdWxlZEV2ZW50VXNlcnMsXG4pOiBQcm9taXNlPFxuICBDb2xsZWN0aW9uPGJpZ2ludCwgVXNlcj4gfCBDb2xsZWN0aW9uPGJpZ2ludCwgeyB1c2VyOiBVc2VyOyBtZW1iZXI6IE1lbWJlciB9PlxuPiB7XG4gIGxldCB1cmwgPSBib3QuY29uc3RhbnRzLnJvdXRlcy5HVUlMRF9TQ0hFRFVMRURfRVZFTlRfVVNFUlMoZ3VpbGRJZCwgZXZlbnRJZCwgb3B0aW9ucyk7XG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICB1cmwgPSBcIj9cIjtcblxuICAgIGlmIChvcHRpb25zLmxpbWl0KSB1cmwgKz0gYGxpbWl0PSR7b3B0aW9ucy5saW1pdH1gO1xuICAgIGlmIChvcHRpb25zLndpdGhNZW1iZXIpIHVybCArPSBgJndpdGhfbWVtYmVyPSR7b3B0aW9ucy53aXRoTWVtYmVyfWA7XG4gICAgaWYgKG9wdGlvbnMuYWZ0ZXIpIHVybCArPSBgJmFmdGVyPSR7b3B0aW9ucy5hZnRlcn1gO1xuICAgIGlmIChvcHRpb25zLmJlZm9yZSkgdXJsICs9IGAmYmVmb3JlPSR7b3B0aW9ucy5iZWZvcmV9YDtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJvdC5yZXN0LnJ1bk1ldGhvZDx7IHVzZXI6IERpc2NvcmRVc2VyOyBtZW1iZXI/OiBEaXNjb3JkTWVtYmVyIH1bXT4oXG4gICAgYm90LnJlc3QsXG4gICAgXCJHRVRcIixcbiAgICB1cmwsXG4gICk7XG5cbiAgaWYgKCFvcHRpb25zPy53aXRoTWVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKFxuICAgICAgcmVzdWx0Lm1hcCgocmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBib3QudHJhbnNmb3JtZXJzLnVzZXIoYm90LCByZXMudXNlcik7XG4gICAgICAgIHJldHVybiBbdXNlci5pZCwgdXNlcl07XG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKFxuICAgIHJlc3VsdC5tYXAoKHJlcykgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGJvdC50cmFuc2Zvcm1lcnMudXNlcihib3QsIHJlcy51c2VyKTtcbiAgICAgIGNvbnN0IG1lbWJlcjogTWVtYmVyID0gYm90LnRyYW5zZm9ybWVycy5tZW1iZXIoYm90LCByZXMubWVtYmVyISwgZ3VpbGRJZCwgdXNlci5pZCk7XG5cbiAgICAgIHJldHVybiBbdXNlci5pZCwgeyBtZW1iZXIsIHVzZXIgfV07XG4gICAgfSksXG4gICk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2V0U2NoZWR1bGVkRXZlbnRVc2VycyB7XG4gIC8qKiBudW1iZXIgb2YgdXNlcnMgdG8gcmV0dXJuICh1cCB0byBtYXhpbXVtIDEwMCksIGRlZmF1bHRzIHRvIDEwMCAqL1xuICBsaW1pdD86IG51bWJlcjtcbiAgLyoqIHdoZXRoZXIgdG8gYWxzbyBoYXZlIG1lbWJlciBvYmplY3RzIHByb3ZpZGVkLCBkZWZhdWx0cyB0byBmYWxzZSAqL1xuICB3aXRoTWVtYmVyPzogYm9vbGVhbjtcbiAgLyoqIGNvbnNpZGVyIG9ubHkgdXNlcnMgYmVmb3JlIGdpdmVuIHVzZXIgaWQgKi9cbiAgYmVmb3JlPzogYmlnaW50O1xuICAvKiogY29uc2lkZXIgb25seSB1c2VycyBhZnRlciBnaXZlbiB1c2VyIGlkLiBJZiBib3RoIGJlZm9yZSBhbmQgYWZ0ZXIgYXJlIHByb3ZpZGVkLCBvbmx5IGJlZm9yZSBpcyByZXNwZWN0ZWQuIEZldGNoaW5nIHVzZXJzIGluLWJldHdlZW4gYmVmb3JlIGFuZCBhZnRlciBpcyBub3Qgc3VwcG9ydGVkLiAqL1xuICBhZnRlcj86IGJpZ2ludDtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxTQUFTLFVBQVUsUUFBUSw2QkFBNkIsQ0FBQztBQWN6RCxPQUFPLGVBQWUsc0JBQXNCLENBQzFDLEdBQVEsRUFDUixPQUFlLEVBQ2YsT0FBZSxFQUNmLE9BQWdDLEVBR2hDO0lBQ0EsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsMkJBQTJCLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQUFBQztJQUV0RixJQUFJLE9BQU8sRUFBRTtRQUNYLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFFVixJQUFJLE9BQU8sQ0FBQyxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ25ELElBQUksT0FBTyxDQUFDLFVBQVUsRUFBRSxHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDcEUsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNwRCxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0tBQ3hEO0lBRUQsTUFBTSxNQUFNLEdBQUcsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FDckMsR0FBRyxDQUFDLElBQUksRUFDUixLQUFLLEVBQ0wsR0FBRyxDQUNKLEFBQUM7SUFFRixJQUFJLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRTtRQUN4QixPQUFPLElBQUksVUFBVSxDQUNuQixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFLO1lBQ2xCLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEFBQUM7WUFDbEQsT0FBTztnQkFBQyxJQUFJLENBQUMsRUFBRTtnQkFBRSxJQUFJO2FBQUMsQ0FBQztTQUN4QixDQUFDLENBQ0gsQ0FBQztLQUNIO0lBRUQsT0FBTyxJQUFJLFVBQVUsQ0FDbkIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBSztRQUNsQixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxBQUFDO1FBQ2xELE1BQU0sTUFBTSxHQUFXLEdBQUcsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFHLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEFBQUM7UUFFbkYsT0FBTztZQUFDLElBQUksQ0FBQyxFQUFFO1lBQUU7Z0JBQUUsTUFBTTtnQkFBRSxJQUFJO2FBQUU7U0FBQyxDQUFDO0tBQ3BDLENBQUMsQ0FDSCxDQUFDO0NBQ0gifQ==