import { Collection } from "./deps.ts";
import { setupCacheRemovals } from "./src/setupCacheRemovals.ts";
import { addCacheCollections } from "./src/addCacheCollections.ts";
import { setupCacheEdits } from "./src/setupCacheEdits.ts";
// PLUGINS MUST TAKE A BOT ARGUMENT WHICH WILL BE MODIFIED
export function enableCachePlugin(rawBot) {
    // MARK THIS PLUGIN BEING USED
    rawBot.enabledPlugins.add("CACHE");
    // CUSTOMIZATION GOES HERE
    const bot = addCacheCollections(rawBot);
    // Get the unmodified transformer.
    const { guild: guild1 , user: user1 , member , channel: channel1 , message , presence , role  } = bot.transformers;
    // Override the transformer
    bot.transformers.guild = function(_, payload) {
        // Run the unmodified transformer
        const result = guild1(bot, payload);
        // Cache the result
        if (result) {
            bot.guilds.set(result.id, result);
            const channels = payload.guild.channels || [];
            channels.forEach((channel)=>{
                bot.transformers.channel(bot, {
                    channel,
                    guildId: result.id
                });
            });
        }
        // Return the result
        return result;
    };
    // Override the transformer
    bot.transformers.user = function(...args) {
        // Run the unmodified transformer
        const result = user1(...args);
        // Cache the result
        if (result) {
            bot.users.set(result.id, result);
        }
        // Return the result
        return result;
    };
    // Override the transformer
    bot.transformers.member = function(...args) {
        // Run the unmodified transformer
        const result = member(...args);
        // Cache the result
        if (result) {
            bot.members.set(bot.transformers.snowflake(`${result.id}${result.guildId}`), result);
        }
        // Return the result
        return result;
    };
    // Override the transformer
    bot.transformers.channel = function(...args) {
        // Run the unmodified transformer
        const result = channel1(...args);
        // Cache the result
        if (result) {
            bot.channels.set(result.id, result);
        }
        // Return the result
        return result;
    };
    // Override the transformer
    bot.transformers.message = function(_, payload) {
        // Run the unmodified transformer
        const result = message(bot, payload);
        // Cache the result
        if (result) {
            bot.messages.set(result.id, result);
            // CACHE THE USER
            const user = bot.transformers.user(bot, payload.author);
            bot.users.set(user.id, user);
            if (payload.guild_id && payload.member) {
                const guildId = bot.transformers.snowflake(payload.guild_id);
                // CACHE THE MEMBER
                bot.members.set(bot.transformers.snowflake(`${payload.author.id}${payload.guild_id}`), bot.transformers.member(bot, payload.member, guildId, user.id));
            }
        }
        // Return the result
        return result;
    };
    // Override the transformer
    bot.transformers.presence = function(...args) {
        // Run the unmodified transformer
        const result = presence(...args);
        // Cache the result
        if (result) {
            bot.presences.set(result.user.id, result);
        }
        // Return the result
        return result;
    };
    // Override the transformer
    bot.transformers.role = function(...args) {
        // Run the unmodified transformer
        const result = role(...args);
        // Cache the result
        if (result) {
            bot.guilds.get(result.guildId)?.roles.set(result.id, result);
        }
        // Return the result
        return result;
    };
    const { GUILD_EMOJIS_UPDATE  } = bot.handlers;
    bot.handlers.GUILD_EMOJIS_UPDATE = function(_, data, shardId) {
        const payload = data.d;
        const guild = bot.guilds.get(bot.transformers.snowflake(payload.guild_id));
        if (guild) {
            guild.emojis = new Collection(payload.emojis.map((e)=>{
                const emoji = bot.transformers.emoji(bot, e);
                return [
                    emoji.id,
                    emoji
                ];
            }));
        }
        GUILD_EMOJIS_UPDATE(bot, data, shardId);
    };
    setupCacheRemovals(bot);
    setupCacheEdits(bot);
    // PLUGINS MUST RETURN THE BOT
    return bot;
}
export default enableCachePlugin;
export * from "./src/addCacheCollections.ts";
export * from "./src/dispatchRequirements.ts";
export * from "./src/setupCacheEdits.ts";
export * from "./src/setupCacheRemovals.ts";
export * from "./src/sweepers.ts";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3QsIENvbGxlY3Rpb24sIERpc2NvcmRHdWlsZEVtb2ppc1VwZGF0ZSB9IGZyb20gXCIuL2RlcHMudHNcIjtcbmltcG9ydCB7IHNldHVwQ2FjaGVSZW1vdmFscyB9IGZyb20gXCIuL3NyYy9zZXR1cENhY2hlUmVtb3ZhbHMudHNcIjtcbmltcG9ydCB7IGFkZENhY2hlQ29sbGVjdGlvbnMsIEJvdFdpdGhDYWNoZSB9IGZyb20gXCIuL3NyYy9hZGRDYWNoZUNvbGxlY3Rpb25zLnRzXCI7XG5pbXBvcnQgeyBzZXR1cENhY2hlRWRpdHMgfSBmcm9tIFwiLi9zcmMvc2V0dXBDYWNoZUVkaXRzLnRzXCI7XG5cbi8vIFBMVUdJTlMgTVVTVCBUQUtFIEEgQk9UIEFSR1VNRU5UIFdISUNIIFdJTEwgQkUgTU9ESUZJRURcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVDYWNoZVBsdWdpbjxCIGV4dGVuZHMgQm90ID0gQm90PihyYXdCb3Q6IEIpOiBCb3RXaXRoQ2FjaGU8Qj4ge1xuICAvLyBNQVJLIFRISVMgUExVR0lOIEJFSU5HIFVTRURcbiAgcmF3Qm90LmVuYWJsZWRQbHVnaW5zLmFkZChcIkNBQ0hFXCIpO1xuXG4gIC8vIENVU1RPTUlaQVRJT04gR09FUyBIRVJFXG4gIGNvbnN0IGJvdCA9IGFkZENhY2hlQ29sbGVjdGlvbnMocmF3Qm90KTtcblxuICAvLyBHZXQgdGhlIHVubW9kaWZpZWQgdHJhbnNmb3JtZXIuXG4gIGNvbnN0IHsgZ3VpbGQsIHVzZXIsIG1lbWJlciwgY2hhbm5lbCwgbWVzc2FnZSwgcHJlc2VuY2UsIHJvbGUgfSA9IGJvdC50cmFuc2Zvcm1lcnM7XG4gIC8vIE92ZXJyaWRlIHRoZSB0cmFuc2Zvcm1lclxuICBib3QudHJhbnNmb3JtZXJzLmd1aWxkID0gZnVuY3Rpb24gKF8sIHBheWxvYWQpIHtcbiAgICAvLyBSdW4gdGhlIHVubW9kaWZpZWQgdHJhbnNmb3JtZXJcbiAgICBjb25zdCByZXN1bHQgPSBndWlsZChib3QsIHBheWxvYWQpO1xuICAgIC8vIENhY2hlIHRoZSByZXN1bHRcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBib3QuZ3VpbGRzLnNldChyZXN1bHQuaWQsIHJlc3VsdCk7XG5cbiAgICAgIGNvbnN0IGNoYW5uZWxzID0gcGF5bG9hZC5ndWlsZC5jaGFubmVscyB8fCBbXTtcblxuICAgICAgY2hhbm5lbHMuZm9yRWFjaCgoY2hhbm5lbCkgPT4ge1xuICAgICAgICBib3QudHJhbnNmb3JtZXJzLmNoYW5uZWwoYm90LCB7IGNoYW5uZWwsIGd1aWxkSWQ6IHJlc3VsdC5pZCB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgcmVzdWx0XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBPdmVycmlkZSB0aGUgdHJhbnNmb3JtZXJcbiAgYm90LnRyYW5zZm9ybWVycy51c2VyID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAvLyBSdW4gdGhlIHVubW9kaWZpZWQgdHJhbnNmb3JtZXJcbiAgICBjb25zdCByZXN1bHQgPSB1c2VyKC4uLmFyZ3MpO1xuICAgIC8vIENhY2hlIHRoZSByZXN1bHRcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBib3QudXNlcnMuc2V0KHJlc3VsdC5pZCwgcmVzdWx0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHRoZSByZXN1bHRcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIE92ZXJyaWRlIHRoZSB0cmFuc2Zvcm1lclxuICBib3QudHJhbnNmb3JtZXJzLm1lbWJlciA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgLy8gUnVuIHRoZSB1bm1vZGlmaWVkIHRyYW5zZm9ybWVyXG4gICAgY29uc3QgcmVzdWx0ID0gbWVtYmVyKC4uLmFyZ3MpO1xuICAgIC8vIENhY2hlIHRoZSByZXN1bHRcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBib3QubWVtYmVycy5zZXQoXG4gICAgICAgIGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKGAke3Jlc3VsdC5pZH0ke3Jlc3VsdC5ndWlsZElkfWApLFxuICAgICAgICByZXN1bHQsXG4gICAgICApO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gdGhlIHJlc3VsdFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gT3ZlcnJpZGUgdGhlIHRyYW5zZm9ybWVyXG4gIGJvdC50cmFuc2Zvcm1lcnMuY2hhbm5lbCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgLy8gUnVuIHRoZSB1bm1vZGlmaWVkIHRyYW5zZm9ybWVyXG4gICAgY29uc3QgcmVzdWx0ID0gY2hhbm5lbCguLi5hcmdzKTtcbiAgICAvLyBDYWNoZSB0aGUgcmVzdWx0XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgYm90LmNoYW5uZWxzLnNldChyZXN1bHQuaWQsIHJlc3VsdCk7XG4gICAgfVxuICAgIC8vIFJldHVybiB0aGUgcmVzdWx0XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBPdmVycmlkZSB0aGUgdHJhbnNmb3JtZXJcbiAgYm90LnRyYW5zZm9ybWVycy5tZXNzYWdlID0gZnVuY3Rpb24gKF8sIHBheWxvYWQpIHtcbiAgICAvLyBSdW4gdGhlIHVubW9kaWZpZWQgdHJhbnNmb3JtZXJcbiAgICBjb25zdCByZXN1bHQgPSBtZXNzYWdlKGJvdCwgcGF5bG9hZCk7XG4gICAgLy8gQ2FjaGUgdGhlIHJlc3VsdFxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIGJvdC5tZXNzYWdlcy5zZXQocmVzdWx0LmlkLCByZXN1bHQpO1xuICAgICAgLy8gQ0FDSEUgVEhFIFVTRVJcbiAgICAgIGNvbnN0IHVzZXIgPSBib3QudHJhbnNmb3JtZXJzLnVzZXIoYm90LCBwYXlsb2FkLmF1dGhvcik7XG4gICAgICBib3QudXNlcnMuc2V0KHVzZXIuaWQsIHVzZXIpO1xuXG4gICAgICBpZiAocGF5bG9hZC5ndWlsZF9pZCAmJiBwYXlsb2FkLm1lbWJlcikge1xuICAgICAgICBjb25zdCBndWlsZElkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5ndWlsZF9pZCk7XG4gICAgICAgIC8vIENBQ0hFIFRIRSBNRU1CRVJcbiAgICAgICAgYm90Lm1lbWJlcnMuc2V0KFxuICAgICAgICAgIGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKGAke3BheWxvYWQuYXV0aG9yLmlkfSR7cGF5bG9hZC5ndWlsZF9pZH1gKSxcbiAgICAgICAgICBib3QudHJhbnNmb3JtZXJzLm1lbWJlcihib3QsIHBheWxvYWQubWVtYmVyLCBndWlsZElkLCB1c2VyLmlkKSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIHJlc3VsdFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gT3ZlcnJpZGUgdGhlIHRyYW5zZm9ybWVyXG4gIGJvdC50cmFuc2Zvcm1lcnMucHJlc2VuY2UgPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgIC8vIFJ1biB0aGUgdW5tb2RpZmllZCB0cmFuc2Zvcm1lclxuICAgIGNvbnN0IHJlc3VsdCA9IHByZXNlbmNlKC4uLmFyZ3MpO1xuICAgIC8vIENhY2hlIHRoZSByZXN1bHRcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBib3QucHJlc2VuY2VzLnNldChyZXN1bHQudXNlci5pZCwgcmVzdWx0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHRoZSByZXN1bHRcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIE92ZXJyaWRlIHRoZSB0cmFuc2Zvcm1lclxuICBib3QudHJhbnNmb3JtZXJzLnJvbGUgPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgIC8vIFJ1biB0aGUgdW5tb2RpZmllZCB0cmFuc2Zvcm1lclxuICAgIGNvbnN0IHJlc3VsdCA9IHJvbGUoLi4uYXJncyk7XG4gICAgLy8gQ2FjaGUgdGhlIHJlc3VsdFxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIGJvdC5ndWlsZHMuZ2V0KHJlc3VsdC5ndWlsZElkKT8ucm9sZXMuc2V0KHJlc3VsdC5pZCwgcmVzdWx0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHRoZSByZXN1bHRcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIGNvbnN0IHsgR1VJTERfRU1PSklTX1VQREFURSB9ID0gYm90LmhhbmRsZXJzO1xuICBib3QuaGFuZGxlcnMuR1VJTERfRU1PSklTX1VQREFURSA9IGZ1bmN0aW9uIChfLCBkYXRhLCBzaGFyZElkKSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IGRhdGEuZCBhcyBEaXNjb3JkR3VpbGRFbW9qaXNVcGRhdGU7XG5cbiAgICBjb25zdCBndWlsZCA9IGJvdC5ndWlsZHMuZ2V0KGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHBheWxvYWQuZ3VpbGRfaWQpKTtcbiAgICBpZiAoZ3VpbGQpIHtcbiAgICAgIGd1aWxkLmVtb2ppcyA9IG5ldyBDb2xsZWN0aW9uKHBheWxvYWQuZW1vamlzLm1hcCgoZSkgPT4ge1xuICAgICAgICBjb25zdCBlbW9qaSA9IGJvdC50cmFuc2Zvcm1lcnMuZW1vamkoYm90LCBlKTtcbiAgICAgICAgcmV0dXJuIFtlbW9qaS5pZCEsIGVtb2ppXTtcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBHVUlMRF9FTU9KSVNfVVBEQVRFKGJvdCwgZGF0YSwgc2hhcmRJZCk7XG4gIH07XG5cbiAgc2V0dXBDYWNoZVJlbW92YWxzKGJvdCk7XG4gIHNldHVwQ2FjaGVFZGl0cyhib3QpO1xuXG4gIC8vIFBMVUdJTlMgTVVTVCBSRVRVUk4gVEhFIEJPVFxuICByZXR1cm4gYm90O1xufVxuXG5leHBvcnQgZGVmYXVsdCBlbmFibGVDYWNoZVBsdWdpbjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9hZGRDYWNoZUNvbGxlY3Rpb25zLnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zcmMvZGlzcGF0Y2hSZXF1aXJlbWVudHMudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9zZXR1cENhY2hlRWRpdHMudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9zZXR1cENhY2hlUmVtb3ZhbHMudHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9zd2VlcGVycy50c1wiO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJTQUFjLFVBQVUsUUFBa0MsV0FBVyxDQUFDO0FBQ3RFLFNBQVMsa0JBQWtCLFFBQVEsNkJBQTZCLENBQUM7QUFDakUsU0FBUyxtQkFBbUIsUUFBc0IsOEJBQThCLENBQUM7QUFDakYsU0FBUyxlQUFlLFFBQVEsMEJBQTBCLENBQUM7QUFFM0QsMERBQTBEO0FBQzFELE9BQU8sU0FBUyxpQkFBaUIsQ0FBc0IsTUFBUyxFQUFtQjtJQUNqRiw4QkFBOEI7SUFDOUIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFbkMsMEJBQTBCO0lBQzFCLE1BQU0sR0FBRyxHQUFHLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxBQUFDO0lBRXhDLGtDQUFrQztJQUNsQyxNQUFNLEVBQUUsS0FBSyxFQUFMLE1BQUssQ0FBQSxFQUFFLElBQUksRUFBSixLQUFJLENBQUEsRUFBRSxNQUFNLENBQUEsRUFBRSxPQUFPLEVBQVAsUUFBTyxDQUFBLEVBQUUsT0FBTyxDQUFBLEVBQUUsUUFBUSxDQUFBLEVBQUUsSUFBSSxDQUFBLEVBQUUsR0FBRyxHQUFHLENBQUMsWUFBWSxBQUFDO0lBQ25GLDJCQUEyQjtJQUMzQixHQUFHLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRyxTQUFVLENBQUMsRUFBRSxPQUFPLEVBQUU7UUFDN0MsaUNBQWlDO1FBQ2pDLE1BQU0sTUFBTSxHQUFHLE1BQUssQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEFBQUM7UUFDbkMsbUJBQW1CO1FBQ25CLElBQUksTUFBTSxFQUFFO1lBQ1YsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUVsQyxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxFQUFFLEFBQUM7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