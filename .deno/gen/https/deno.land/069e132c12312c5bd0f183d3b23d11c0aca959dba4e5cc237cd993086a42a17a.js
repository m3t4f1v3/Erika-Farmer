import { Collection } from "../deps.ts";
export const dmChannelIds = new Collection();
export async function sendDirectMessage(bot, userId, content) {
    if (typeof content === "string")
        content = { content };
    const cachedChannelId = dmChannelIds.get(userId);
    if (cachedChannelId)
        return bot.helpers.sendMessage(cachedChannelId, content);
    const channel = (await bot.helpers.getDmChannel(userId));
    dmChannelIds.set(userId, channel.id);
    return bot.helpers.sendMessage(channel.id, content);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VuZERpcmVjdE1lc3NhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzZW5kRGlyZWN0TWVzc2FnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQU8sVUFBVSxFQUFpQixNQUFNLFlBQVksQ0FBQztBQUc1RCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxVQUFVLEVBQWtCLENBQUM7QUFHN0QsTUFBTSxDQUFDLEtBQUssVUFBVSxpQkFBaUIsQ0FDckMsR0FBUSxFQUNSLE1BQWMsRUFDZCxPQUErQjtJQUUvQixJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVE7UUFBRSxPQUFPLEdBQUcsRUFBRSxPQUFPLEVBQUUsQ0FBQztJQUd2RCxNQUFNLGVBQWUsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWpELElBQUksZUFBZTtRQUFFLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRzlFLE1BQU0sT0FBTyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBR3pELFlBQVksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUdyQyxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDdEQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvdCwgQ29sbGVjdGlvbiwgQ3JlYXRlTWVzc2FnZSB9IGZyb20gXCIuLi9kZXBzLnRzXCI7XG5cbi8qKiBNYXBzIHRoZSA8dXNlcklkLCBjaGFubmVsSWQ+IGZvciBkbSBjaGFubmVscyAqL1xuZXhwb3J0IGNvbnN0IGRtQ2hhbm5lbElkcyA9IG5ldyBDb2xsZWN0aW9uPGJpZ2ludCwgYmlnaW50PigpO1xuXG4vKiogU2VuZHMgYSBkaXJlY3QgbWVzc2FnZSB0byBhIHVzZXIuIFRoaXMgY2FuIHRha2UgdHdvIEFQSSBjYWxscy4gVGhlIGZpcnN0IGNhbGwgaXMgdG8gY3JlYXRlIGEgZG0gY2hhbm5lbC4gVGhlbiBzZW5kaW5nIHRoZSBtZXNzYWdlIHRvIHRoYXQgY2hhbm5lbC4gQ2hhbm5lbCBpZHMgYXJlIGNhY2hlZCBhcyBuZWVkZWQgdG8gcHJldmVudCBkdXBsaWNhdGUgcmVxdWVzdHMuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZERpcmVjdE1lc3NhZ2UoXG4gIGJvdDogQm90LFxuICB1c2VySWQ6IGJpZ2ludCxcbiAgY29udGVudDogc3RyaW5nIHwgQ3JlYXRlTWVzc2FnZSxcbikge1xuICBpZiAodHlwZW9mIGNvbnRlbnQgPT09IFwic3RyaW5nXCIpIGNvbnRlbnQgPSB7IGNvbnRlbnQgfTtcblxuICAvLyBHRVQgQ0hBTk5FTCBJRCBGUk9NIENBQ0hFIE9SIENSRUFURSBUSEUgQ0hBTk5FTCBGT1IgVEhJUyBVU0VSXG4gIGNvbnN0IGNhY2hlZENoYW5uZWxJZCA9IGRtQ2hhbm5lbElkcy5nZXQodXNlcklkKTtcbiAgLy8gSUYgSUQgSVMgQ0FDSEVEIFNFTkQgTUVTU0FHRSBESVJFQ1RMWVxuICBpZiAoY2FjaGVkQ2hhbm5lbElkKSByZXR1cm4gYm90LmhlbHBlcnMuc2VuZE1lc3NhZ2UoY2FjaGVkQ2hhbm5lbElkLCBjb250ZW50KTtcblxuICAvLyBDUkVBVEUgQSBORVcgRE0gQ0hBTk5FTCBBTkQgUExVQ0sgSVRTIElEXG4gIGNvbnN0IGNoYW5uZWwgPSAoYXdhaXQgYm90LmhlbHBlcnMuZ2V0RG1DaGFubmVsKHVzZXJJZCkpO1xuXG4gIC8vIENBQ0hFIElUIEZPUiBGVVRVUkUgUkVRVUVTVFNcbiAgZG1DaGFubmVsSWRzLnNldCh1c2VySWQsIGNoYW5uZWwuaWQpO1xuXG4gIC8vIENBQ0hFIENIQU5ORUwgSUYgTkVFREVEXG4gIHJldHVybiBib3QuaGVscGVycy5zZW5kTWVzc2FnZShjaGFubmVsLmlkLCBjb250ZW50KTtcbn1cbiJdfQ==