import { requireBotChannelPermissions } from "../permissions.ts";
export default function editWebhook(bot) {
    const editWebhookOld = bot.helpers.editWebhook;
    bot.helpers.editWebhook = async function (webhookId, options, fromChannelId) {
        if (options.channelId)
            requireBotChannelPermissions(bot, options.channelId, ["MANAGE_WEBHOOKS"]);
        if (fromChannelId)
            requireBotChannelPermissions(bot, fromChannelId, ["MANAGE_WEBHOOKS"]);
        if (options.name) {
            if (options.name === "clyde" ||
                !bot.utils.validateLength(options.name, { min: 2, max: 32 })) {
                throw new Error("The webhook name can not be clyde and it must be between 2 and 32 characters long.");
            }
        }
        return await editWebhookOld(webhookId, options);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdFdlYmhvb2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJlZGl0V2ViaG9vay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVqRSxNQUFNLENBQUMsT0FBTyxVQUFVLFdBQVcsQ0FBQyxHQUFpQjtJQUNuRCxNQUFNLGNBQWMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztJQUUvQyxHQUFHLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxLQUFLLFdBQVcsU0FBUyxFQUFFLE9BQU8sRUFBRSxhQUFhO1FBQ3pFLElBQUksT0FBTyxDQUFDLFNBQVM7WUFBRSw0QkFBNEIsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUNqRyxJQUFJLGFBQWE7WUFBRSw0QkFBNEIsQ0FBQyxHQUFHLEVBQUUsYUFBYSxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1FBRXpGLElBQUksT0FBTyxDQUFDLElBQUksRUFBRTtZQUNoQixJQUVFLE9BQU8sQ0FBQyxJQUFJLEtBQUssT0FBTztnQkFDeEIsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFDNUQ7Z0JBQ0EsTUFBTSxJQUFJLEtBQUssQ0FDYixvRkFBb0YsQ0FDckYsQ0FBQzthQUNIO1NBQ0Y7UUFFRCxPQUFPLE1BQU0sY0FBYyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm90V2l0aENhY2hlIH0gZnJvbSBcIi4uLy4uL2RlcHMudHNcIjtcbmltcG9ydCB7IHJlcXVpcmVCb3RDaGFubmVsUGVybWlzc2lvbnMgfSBmcm9tIFwiLi4vcGVybWlzc2lvbnMudHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZWRpdFdlYmhvb2soYm90OiBCb3RXaXRoQ2FjaGUpIHtcbiAgY29uc3QgZWRpdFdlYmhvb2tPbGQgPSBib3QuaGVscGVycy5lZGl0V2ViaG9vaztcblxuICBib3QuaGVscGVycy5lZGl0V2ViaG9vayA9IGFzeW5jIGZ1bmN0aW9uICh3ZWJob29rSWQsIG9wdGlvbnMsIGZyb21DaGFubmVsSWQpIHtcbiAgICBpZiAob3B0aW9ucy5jaGFubmVsSWQpIHJlcXVpcmVCb3RDaGFubmVsUGVybWlzc2lvbnMoYm90LCBvcHRpb25zLmNoYW5uZWxJZCwgW1wiTUFOQUdFX1dFQkhPT0tTXCJdKTtcbiAgICBpZiAoZnJvbUNoYW5uZWxJZCkgcmVxdWlyZUJvdENoYW5uZWxQZXJtaXNzaW9ucyhib3QsIGZyb21DaGFubmVsSWQsIFtcIk1BTkFHRV9XRUJIT09LU1wiXSk7XG5cbiAgICBpZiAob3B0aW9ucy5uYW1lKSB7XG4gICAgICBpZiAoXG4gICAgICAgIC8vIFNwZWNpZmljIHVzZXJuYW1lcyB0aGF0IGRpc2NvcmQgZG9lcyBub3QgYWxsb3dcbiAgICAgICAgb3B0aW9ucy5uYW1lID09PSBcImNseWRlXCIgfHxcbiAgICAgICAgIWJvdC51dGlscy52YWxpZGF0ZUxlbmd0aChvcHRpb25zLm5hbWUsIHsgbWluOiAyLCBtYXg6IDMyIH0pXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiVGhlIHdlYmhvb2sgbmFtZSBjYW4gbm90IGJlIGNseWRlIGFuZCBpdCBtdXN0IGJlIGJldHdlZW4gMiBhbmQgMzIgY2hhcmFjdGVycyBsb25nLlwiLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBlZGl0V2ViaG9va09sZCh3ZWJob29rSWQsIG9wdGlvbnMpO1xuICB9O1xufVxuIl19