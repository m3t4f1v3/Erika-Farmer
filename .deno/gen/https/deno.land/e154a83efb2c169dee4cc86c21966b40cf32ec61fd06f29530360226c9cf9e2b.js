import { identify } from "./identify.ts";
import { handleMessage } from "./handleMessage.ts";
import { DEFAULT_HEARTBEAT_INTERVAL, GATEWAY_RATE_LIMIT_RESET_INTERVAL, MAX_GATEWAY_REQUESTS_PER_INTERVAL, ShardState, } from "./types.ts";
import { startHeartbeating } from "./startHeartbeating.ts";
import { stopHeartbeating } from "./stopHeartbeating.ts";
import { resume } from "./resume.ts";
import { createLeakyBucket } from "../../util/bucket.ts";
import { calculateSafeRequests } from "./calculateSafeRequests.ts";
import { send } from "./send.ts";
import { handleClose } from "./handleClose.ts";
import { connect } from "./connect.ts";
import { close } from "./close.ts";
import { shutdown } from "./shutdown.ts";
import { isOpen } from "./isOpen.ts";
import { API_VERSION } from "../../util/constants.ts";
export function createShard(options) {
    const calculateSafeRequestsOverwritten = options.calculateSafeRequests ?? calculateSafeRequests;
    const closeOverwritten = options.close ?? close;
    const connectOverwritten = options.connect ?? connect;
    const identifyOverwritten = options.identify ?? identify;
    const sendOverwritten = options.send ?? send;
    const shutdownOverwritten = options.shutdown ?? shutdown;
    const resumeOverwritten = options.resume ?? resume;
    const handleCloseOverwritten = options.handleClose ?? handleClose;
    const handleMessageOverwritten = options.handleMessage ?? handleMessage;
    const isOpenOverwritten = options.isOpen ?? isOpen;
    const startHeartbeatingOverwritten = options.startHeartbeating ?? startHeartbeating;
    const stopHeartbeatingOverwritten = options.stopHeartbeating ?? stopHeartbeating;
    return {
        gatewayConfig: {
            compress: options.gatewayConfig.compress ?? false,
            intents: options.gatewayConfig.intents ?? 0,
            properties: {
                $os: options.gatewayConfig?.properties?.$os ?? Deno.build.os,
                $browser: options.gatewayConfig?.properties?.$browser ?? "Discordeno",
                $device: options.gatewayConfig?.properties?.$device ?? "Discordeno",
            },
            token: options.gatewayConfig.token,
            url: options.gatewayConfig.url ?? "wss://gateway.discord.gg",
            version: options.gatewayConfig.version ?? API_VERSION,
        },
        heart: {
            acknowledged: false,
            interval: DEFAULT_HEARTBEAT_INTERVAL,
        },
        id: options.id,
        maxRequestsPerRateLimitTick: MAX_GATEWAY_REQUESTS_PER_INTERVAL,
        previousSequenceNumber: options.previousSequenceNumber || null,
        rateLimitResetInterval: GATEWAY_RATE_LIMIT_RESET_INTERVAL,
        sessionId: undefined,
        socket: undefined,
        state: ShardState.Offline,
        totalShards: options.totalShards,
        events: options.events ?? {},
        calculateSafeRequests: function () {
            return calculateSafeRequestsOverwritten(this);
        },
        close: function (code, reason) {
            return closeOverwritten(this, code, reason);
        },
        connect: async function () {
            return await connectOverwritten(this);
        },
        identify: async function () {
            return await identifyOverwritten(this);
        },
        isOpen: function () {
            return isOpenOverwritten(this);
        },
        makePresence: options.makePresence,
        resume: async function () {
            return await resumeOverwritten(this);
        },
        send: async function (message, highPriority = false) {
            return await sendOverwritten(this, message, highPriority);
        },
        shutdown: async function () {
            return await shutdownOverwritten(this);
        },
        bucket: createLeakyBucket({
            max: MAX_GATEWAY_REQUESTS_PER_INTERVAL,
            refillInterval: GATEWAY_RATE_LIMIT_RESET_INTERVAL,
            refillAmount: MAX_GATEWAY_REQUESTS_PER_INTERVAL,
        }),
        handleClose: async function (close) {
            return await handleCloseOverwritten(this, close);
        },
        handleMessage: async function (message) {
            return await handleMessageOverwritten(this, message);
        },
        requestIdentify: async function () {
            return await options.requestIdentify(this.id);
        },
        offlineSendQueue: [],
        resolves: new Map(),
        startHeartbeating: function (interval) {
            return startHeartbeatingOverwritten(this, interval);
        },
        stopHeartbeating: function () {
            return stopHeartbeatingOverwritten(this);
        },
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlU2hhcmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjcmVhdGVTaGFyZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNuRCxPQUFPLEVBQ0wsMEJBQTBCLEVBQzFCLGlDQUFpQyxFQUNqQyxpQ0FBaUMsRUFPakMsVUFBVSxHQUNYLE1BQU0sWUFBWSxDQUFDO0FBRXBCLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzNELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDckMsT0FBTyxFQUFFLGlCQUFpQixFQUFlLE1BQU0sc0JBQXNCLENBQUM7QUFDdEUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDbkUsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNqQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDL0MsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUN2QyxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQ25DLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDekMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUdyQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFPdEQsTUFBTSxVQUFVLFdBQVcsQ0FDekIsT0FBb0I7SUFHcEIsTUFBTSxnQ0FBZ0MsR0FBRyxPQUFPLENBQUMscUJBQXFCLElBQUkscUJBQXFCLENBQUM7SUFDaEcsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENB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Y2VzQ29udGVudCI6WyJpbXBvcnQgeyBpZGVudGlmeSB9IGZyb20gXCIuL2lkZW50aWZ5LnRzXCI7XG5pbXBvcnQgeyBoYW5kbGVNZXNzYWdlIH0gZnJvbSBcIi4vaGFuZGxlTWVzc2FnZS50c1wiO1xuaW1wb3J0IHtcbiAgREVGQVVMVF9IRUFSVEJFQVRfSU5URVJWQUwsXG4gIEdBVEVXQVlfUkFURV9MSU1JVF9SRVNFVF9JTlRFUlZBTCxcbiAgTUFYX0dBVEVXQVlfUkVRVUVTVFNfUEVSX0lOVEVSVkFMLFxuICBTaGFyZCxcbiAgU2hhcmRFdmVudHMsXG4gIFNoYXJkR2F0ZXdheUNvbmZpZyxcbiAgU2hhcmRIZWFydCxcbiAgU2hhcmRTb2NrZXRDbG9zZUNvZGVzLFxuICBTaGFyZFNvY2tldFJlcXVlc3QsXG4gIFNoYXJkU3RhdGUsXG59IGZyb20gXCIuL3R5cGVzLnRzXCI7XG5pbXBvcnQgeyBTdGF0dXNVcGRhdGUgfSBmcm9tIFwiLi4vLi4vaGVscGVycy9taXNjL2VkaXRTaGFyZFN0YXR1cy50c1wiO1xuaW1wb3J0IHsgc3RhcnRIZWFydGJlYXRpbmcgfSBmcm9tIFwiLi9zdGFydEhlYXJ0YmVhdGluZy50c1wiO1xuaW1wb3J0IHsgc3RvcEhlYXJ0YmVhdGluZyB9IGZyb20gXCIuL3N0b3BIZWFydGJlYXRpbmcudHNcIjtcbmltcG9ydCB7IHJlc3VtZSB9IGZyb20gXCIuL3Jlc3VtZS50c1wiO1xuaW1wb3J0IHsgY3JlYXRlTGVha3lCdWNrZXQsIExlYWt5QnVja2V0IH0gZnJvbSBcIi4uLy4uL3V0aWwvYnVja2V0LnRzXCI7XG5pbXBvcnQgeyBjYWxjdWxhdGVTYWZlUmVxdWVzdHMgfSBmcm9tIFwiLi9jYWxjdWxhdGVTYWZlUmVxdWVzdHMudHNcIjtcbmltcG9ydCB7IHNlbmQgfSBmcm9tIFwiLi9zZW5kLnRzXCI7XG5pbXBvcnQgeyBoYW5kbGVDbG9zZSB9IGZyb20gXCIuL2hhbmRsZUNsb3NlLnRzXCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSBcIi4vY29ubmVjdC50c1wiO1xuaW1wb3J0IHsgY2xvc2UgfSBmcm9tIFwiLi9jbG9zZS50c1wiO1xuaW1wb3J0IHsgc2h1dGRvd24gfSBmcm9tIFwiLi9zaHV0ZG93bi50c1wiO1xuaW1wb3J0IHsgaXNPcGVuIH0gZnJvbSBcIi4vaXNPcGVuLnRzXCI7XG5pbXBvcnQgeyBEaXNjb3JkR2F0ZXdheVBheWxvYWQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvZGlzY29yZC50c1wiO1xuaW1wb3J0IHsgR2F0ZXdheUludGVudHMsIFBpY2tQYXJ0aWFsIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3NoYXJlZC50c1wiO1xuaW1wb3J0IHsgQVBJX1ZFUlNJT04gfSBmcm9tIFwiLi4vLi4vdXRpbC9jb25zdGFudHMudHNcIjtcblxuLy8gVE9ETzogZGVidWdcbi8vIFRPRE86IGZ1bmN0aW9uIG92ZXJ3cml0ZVxuLy8gVE9ETzogaW1wcm92ZSBzaGFyZCBldmVudCByZXNvbHZpbmdcblxuLyoqICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2hhcmQoXG4gIG9wdGlvbnM6IENyZWF0ZVNoYXJkLFxuKSB7XG4gIC8vIFRoaXMgaXMgZG9uZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uc1xuICBjb25zdCBjYWxjdWxhdGVTYWZlUmVxdWVzdHNPdmVyd3JpdHRlbiA9IG9wdGlvbnMuY2FsY3VsYXRlU2FmZVJlcXVlc3RzID8/IGNhbGN1bGF0ZVNhZmVSZXF1ZXN0cztcbiAgY29uc3QgY2xvc2VPdmVyd3JpdHRlbiA9IG9wdGlvbnMuY2xvc2UgPz8gY2xvc2U7XG4gIGNvbnN0IGNvbm5lY3RPdmVyd3JpdHRlbiA9IG9wdGlvbnMuY29ubmVjdCA/PyBjb25uZWN0O1xuICBjb25zdCBpZGVudGlmeU92ZXJ3cml0dGVuID0gb3B0aW9ucy5pZGVudGlmeSA/PyBpZGVudGlmeTtcbiAgY29uc3Qgc2VuZE92ZXJ3cml0dGVuID0gb3B0aW9ucy5zZW5kID8/IHNlbmQ7XG4gIGNvbnN0IHNodXRkb3duT3ZlcndyaXR0ZW4gPSBvcHRpb25zLnNodXRkb3duID8/IHNodXRkb3duO1xuICBjb25zdCByZXN1bWVPdmVyd3JpdHRlbiA9IG9wdGlvbnMucmVzdW1lID8/IHJlc3VtZTtcbiAgY29uc3QgaGFuZGxlQ2xvc2VPdmVyd3JpdHRlbiA9IG9wdGlvbnMuaGFuZGxlQ2xvc2UgPz8gaGFuZGxlQ2xvc2U7XG4gIGNvbnN0IGhhbmRsZU1lc3NhZ2VPdmVyd3JpdHRlbiA9IG9wdGlvbnMuaGFuZGxlTWVzc2FnZSA/PyBoYW5kbGVNZXNzYWdlO1xuICBjb25zdCBpc09wZW5PdmVyd3JpdHRlbiA9IG9wdGlvbnMuaXNPcGVuID8/IGlzT3BlbjtcbiAgY29uc3Qgc3RhcnRIZWFydGJlYXRpbmdPdmVyd3JpdHRlbiA9IG9wdGlvbnMuc3RhcnRIZWFydGJlYXRpbmcgPz8gc3RhcnRIZWFydGJlYXRpbmc7XG4gIGNvbnN0IHN0b3BIZWFydGJlYXRpbmdPdmVyd3JpdHRlbiA9IG9wdGlvbnMuc3RvcEhlYXJ0YmVhdGluZyA/PyBzdG9wSGVhcnRiZWF0aW5nO1xuXG4gIHJldHVybiB7XG4gICAgLy8gLS0tLS0tLS0tLVxuICAgIC8vIFBST1BFUlRJRVNcbiAgICAvLyAtLS0tLS0tLS0tXG5cbiAgICAvKiogVGhlIGdhdGV3YXkgY29uZmlndXJhdGlvbiB3aGljaCBpcyB1c2VkIHRvIGNvbm5lY3QgdG8gRGlzY29yZC4gKi9cbiAgICBnYXRld2F5Q29uZmlnOiB7XG4gICAgICBjb21wcmVzczogb3B0aW9ucy5nYXRld2F5Q29uZmlnLmNvbXByZXNzID8/IGZhbHNlLFxuICAgICAgaW50ZW50czogb3B0aW9ucy5nYXRld2F5Q29uZmlnLmludGVudHMgPz8gMCxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgJG9zOiBvcHRpb25zLmdhdGV3YXlDb25maWc/LnByb3BlcnRpZXM/LiRvcyA/PyBEZW5vLmJ1aWxkLm9zLFxuICAgICAgICAkYnJvd3Nlcjogb3B0aW9ucy5nYXRld2F5Q29uZmlnPy5wcm9wZXJ0aWVzPy4kYnJvd3NlciA/PyBcIkRpc2NvcmRlbm9cIixcbiAgICAgICAgJGRldmljZTogb3B0aW9ucy5nYXRld2F5Q29uZmlnPy5wcm9wZXJ0aWVzPy4kZGV2aWNlID8/IFwiRGlzY29yZGVub1wiLFxuICAgICAgfSxcbiAgICAgIHRva2VuOiBvcHRpb25zLmdhdGV3YXlDb25maWcudG9rZW4sXG4gICAgICB1cmw6IG9wdGlvbnMuZ2F0ZXdheUNvbmZpZy51cmwgPz8gXCJ3c3M6Ly9nYXRld2F5LmRpc2NvcmQuZ2dcIixcbiAgICAgIHZlcnNpb246IG9wdGlvbnMuZ2F0ZXdheUNvbmZpZy52ZXJzaW9uID8/IEFQSV9WRVJTSU9OLFxuICAgIH0gYXMgU2hhcmRHYXRld2F5Q29uZmlnLFxuICAgIC8qKiBUaGlzIGNvbnRhaW5zIGFsbCB0aGUgaGVhcnRiZWF0IGluZm9ybWF0aW9uICovXG4gICAgaGVhcnQ6IHtcbiAgICAgIGFja25vd2xlZGdlZDogZmFsc2UsXG4gICAgICBpbnRlcnZhbDogREVGQVVMVF9IRUFSVEJFQVRfSU5URVJWQUwsXG4gICAgfSBhcyBTaGFyZEhlYXJ0LFxuICAgIC8qKiBJZCBvZiB0aGUgc2hhcmQuICovXG4gICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgLyoqIFRoZSBtYXhpbXVtIG9mIHJlcXVlc3RzIHdoaWNoIGNhbiBiZSBzZW5kIHRvIGRpc2NvcmQgcGVyIHJhdGUgbGltaXQgdGljay5cbiAgICAgKiBUeXBpY2FsbHkgdGhpcyB2YWx1ZSBzaG91bGQgbm90IGJlIGNoYW5nZWQuXG4gICAgICovXG4gICAgbWF4UmVxdWVzdHNQZXJSYXRlTGltaXRUaWNrOiBNQVhfR0FURVdBWV9SRVFVRVNUU19QRVJfSU5URVJWQUwsXG4gICAgLyoqIFRoZSBwcmV2aW91cyBwYXlsb2FkIHNlcXVlbmNlIG51bWJlci4gKi9cbiAgICBwcmV2aW91c1NlcXVlbmNlTnVtYmVyOiBvcHRpb25zLnByZXZpb3VzU2VxdWVuY2VOdW1iZXIgfHwgbnVsbCxcbiAgICAvKiogSW4gd2hpY2ggaW50ZXJ2YWwgKGluIG1pbGxpc2Vjb25kcykgdGhlIGdhdGV3YXkgcmVzZXRzIGl0J3MgcmF0ZSBsaW1pdC4gKi9cbiAgICByYXRlTGltaXRSZXNldEludGVydmFsOiBHQVRFV0FZX1JBVEVfTElNSVRfUkVTRVRfSU5URVJWQUwsXG4gICAgLyoqIEN1cnJlbnQgc2Vzc2lvbiBpZCBvZiB0aGUgc2hhcmQgaWYgcHJlc2VudC4gKi9cbiAgICBzZXNzaW9uSWQ6IHVuZGVmaW5lZCBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgLyoqIFRoaXMgY29udGFpbnMgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIHRvIERpc2NvcmQsIGlmIGN1cnJlbnRseSBjb25uZWN0ZWQuICovXG4gICAgc29ja2V0OiB1bmRlZmluZWQgYXMgV2ViU29ja2V0IHwgdW5kZWZpbmVkLFxuICAgIC8qKiBDdXJyZW50IGludGVybmFsIHN0YXRlIG9mIHRoZSBzaGFyZC4gKi9cbiAgICBzdGF0ZTogU2hhcmRTdGF0ZS5PZmZsaW5lLFxuICAgIC8qKiBUaGUgdG90YWwgYW1vdW50IG9mIHNoYXJkcyB3aGljaCBhcmUgdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIERpc2NvcmQuICovXG4gICAgdG90YWxTaGFyZHM6IG9wdGlvbnMudG90YWxTaGFyZHMsXG5cbiAgICAvLyAtLS0tLS0tLS0tXG4gICAgLy8gTUVUSE9EU1xuICAgIC8vIC0tLS0tLS0tLS1cblxuICAgIC8qKiBUaGUgc2hhcmQgcmVsYXRlZCBldmVudCBoYW5kbGVycy4gKi9cbiAgICBldmVudHM6IG9wdGlvbnMuZXZlbnRzID8/IHt9IGFzIFNoYXJkRXZlbnRzLFxuXG4gICAgLyoqIENhbGN1bGF0ZSB0aGUgYW1vdW50IG9mIHJlcXVlc3RzIHdoaWNoIGNhbiBzYWZlbHkgYmUgbWFkZSBwZXIgcmF0ZSBsaW1pdCBpbnRlcnZhbCxcbiAgICAgKiBiZWZvcmUgdGhlIGdhdGV3YXkgZ2V0cyBkaXNjb25uZWN0ZWQgZHVlIHRvIGFuIGV4Y2VlZGVkIHJhdGUgbGltaXQuXG4gICAgICovXG4gICAgY2FsY3VsYXRlU2FmZVJlcXVlc3RzOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2FsY3VsYXRlU2FmZVJlcXVlc3RzT3ZlcndyaXR0ZW4odGhpcyk7XG4gICAgfSxcblxuICAgIC8qKiBDbG9zZSB0aGUgc29ja2V0IGNvbm5lY3Rpb24gdG8gZGlzY29yZCBpZiBwcmVzZW50LiAqL1xuICAgIGNsb3NlOiBmdW5jdGlvbiAoY29kZTogbnVtYmVyLCByZWFzb246IHN0cmluZykge1xuICAgICAgcmV0dXJuIGNsb3NlT3ZlcndyaXR0ZW4odGhpcywgY29kZSwgcmVhc29uKTtcbiAgICB9LFxuXG4gICAgLyoqIENvbm5lY3QgdGhlIHNoYXJkIHdpdGggdGhlIGdhdGV3YXkgYW5kIHN0YXJ0IGhlYXJ0YmVhdGluZy5cbiAgICAgKiBUaGlzIHdpbGwgbm90IGlkZW50aWZ5IHRoZSBzaGFyZCB0byB0aGUgZ2F0ZXdheS5cbiAgICAgKi9cbiAgICBjb25uZWN0OiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYXdhaXQgY29ubmVjdE92ZXJ3cml0dGVuKHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKiogSWRlbnRpZnkgdGhlIHNoYXJkIHRvIHRoZSBnYXRld2F5LlxuICAgICAqIElmIG5vdCBjb25uZWN0ZWQsIHRoaXMgd2lsbCBhbHNvIGNvbm5lY3QgdGhlIHNoYXJkIHRvIHRoZSBnYXRld2F5LlxuICAgICAqL1xuICAgIGlkZW50aWZ5OiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYXdhaXQgaWRlbnRpZnlPdmVyd3JpdHRlbih0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqIENoZWNrIHdoZXRoZXIgdGhlIGNvbm5lY3Rpb24gdG8gRGlzY29yZCBpcyBjdXJyZW50bHkgb3Blbi4gKi9cbiAgICBpc09wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpc09wZW5PdmVyd3JpdHRlbih0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqIEZ1bmN0aW9uIHdoaWNoIGNhbiBiZSBvdmVyd3JpdHRlbiBpbiBvcmRlciB0byBnZXQgdGhlIHNoYXJkcyBwcmVzZW5jZS4gKi9cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGFsbG93cyB0byBiZSBhc3luYywgaW4gY2FzZSB0aGUgZGV2cyBjcmVhdGUgdGhlIHByZXNlbmNlIGJhc2VkIG9uIGVnLiBkYXRhYmFzZSB2YWx1ZXMuXG4gICAgLy8gUGFzc2luZyB0aGUgc2hhcmQncyBpZCB0aGVyZSB0byBtYWtlIGl0IGVhc2llciBmb3IgdGhlIGRldiB0byB1c2UgdGhpcyBmdW5jdGlvbi5cbiAgICBtYWtlUHJlc2VuY2U6IG9wdGlvbnMubWFrZVByZXNlbmNlLFxuXG4gICAgLyoqIEF0dGVtcHQgdG8gcmVzdW1lIHRoZSBwcmV2aW91cyBzaGFyZHMgc2Vzc2lvbiB3aXRoIHRoZSBnYXRld2F5LiAqL1xuICAgIHJlc3VtZTogYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3VtZU92ZXJ3cml0dGVuKHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKiogU2VuZCBhIG1lc3NhZ2UgdG8gRGlzY29yZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtoaWdoUHJpb3JpdHk9ZmFsc2VdIC0gV2hldGhlciB0aGlzIG1lc3NhZ2Ugc2hvdWxkIGJlIHNlbmQgYXNhcC5cbiAgICAgKi9cbiAgICBzZW5kOiBhc3luYyBmdW5jdGlvbiAobWVzc2FnZTogU2hhcmRTb2NrZXRSZXF1ZXN0LCBoaWdoUHJpb3JpdHk6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGF3YWl0IHNlbmRPdmVyd3JpdHRlbih0aGlzLCBtZXNzYWdlLCBoaWdoUHJpb3JpdHkpO1xuICAgIH0sXG5cbiAgICAvKiogU2h1dGRvd24gdGhlIHNoYXJkLlxuICAgICAqIEZvcmNlZnVsbHkgZGlzY29ubmVjdCB0aGUgc2hhcmQgZnJvbSBEaXNjb3JkLlxuICAgICAqIFRoZSBzaGFyZCBtYXkgbm90IGF0dGVtcHQgdG8gcmVjb25uZWN0IHdpdGggRGlzY29yZC5cbiAgICAgKi9cbiAgICBzaHV0ZG93bjogYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHNodXRkb3duT3ZlcndyaXR0ZW4odGhpcyk7XG4gICAgfSxcblxuICAgIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzaGFyZCBidWNrZXQuXG4gICAgICogT25seSBhY2Nlc3MgdGhpcyBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAgICpcbiAgICAgKiBCdWNrZXQgZm9yIGhhbmRsaW5nIHNoYXJkIHJlcXVlc3QgcmF0ZSBsaW1pdHMuXG4gICAgICovXG4gICAgYnVja2V0OiBjcmVhdGVMZWFreUJ1Y2tldCh7XG4gICAgICBtYXg6IE1BWF9HQVRFV0FZX1JFUVVFU1RTX1BFUl9JTlRFUlZBTCxcbiAgICAgIHJlZmlsbEludGVydmFsOiBHQVRFV0FZX1JBVEVfTElNSVRfUkVTRVRfSU5URVJWQUwsXG4gICAgICByZWZpbGxBbW91bnQ6IE1BWF9HQVRFV0FZX1JFUVVFU1RTX1BFUl9JTlRFUlZBTCxcbiAgICB9KSxcblxuICAgIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzaGFyZCBmdW5jdGlvbi5cbiAgICAgKiBPbmx5IHVzZSB0aGlzIGZ1bmN0aW9uIGlmIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy5cbiAgICAgKlxuICAgICAqIEhhbmRsZSBhIGdhdGV3YXkgY29ubmVjdGlvbiBjbG9zZS5cbiAgICAgKi9cbiAgICBoYW5kbGVDbG9zZTogYXN5bmMgZnVuY3Rpb24gKGNsb3NlOiBDbG9zZUV2ZW50KSB7XG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlQ2xvc2VPdmVyd3JpdHRlbih0aGlzLCBjbG9zZSk7XG4gICAgfSxcblxuICAgIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzaGFyZCBmdW5jdGlvbi5cbiAgICAgKiBPbmx5IHVzZSB0aGlzIGZ1bmN0aW9uIGlmIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy5cbiAgICAgKlxuICAgICAqIEhhbmRsZSBhbiBpbmNvbWluZyBnYXRld2F5IG1lc3NhZ2UuXG4gICAgICovXG4gICAgaGFuZGxlTWVzc2FnZTogYXN5bmMgZnVuY3Rpb24gKG1lc3NhZ2U6IE1lc3NhZ2VFdmVudDxhbnk+KSB7XG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlTWVzc2FnZU92ZXJ3cml0dGVuKHRoaXMsIG1lc3NhZ2UpO1xuICAgIH0sXG5cbiAgICAvKiogVGhpcyBmdW5jdGlvbiBjb21tdW5pY2F0ZXMgd2l0aCB0aGUgbWFuYWdlbWVudCBwcm9jZXNzLCBpbiBvcmRlciB0byBrbm93IHdoZXRoZXIgaXRzIGZyZWUgdG8gaWRlbnRpZnkuICovXG4gICAgcmVxdWVzdElkZW50aWZ5OiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYXdhaXQgb3B0aW9ucy5yZXF1ZXN0SWRlbnRpZnkodGhpcy5pZCk7XG4gICAgfSxcblxuICAgIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzdGF0ZS5cbiAgICAgKiBPbmx5IHVzZSB0aGlzIGlmIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy5cbiAgICAgKlxuICAgICAqIENhY2hlIGZvciBwZW5kaW5nIGdhdGV3YXkgcmVxdWVzdHMgd2hpY2ggc2hvdWxkIGhhdmUgYmVlbiBzZW5kIHdoaWxlIHRoZSBnYXRld2F5IHdlbnQgb2ZmbGluZS5cbiAgICAgKi9cbiAgICBvZmZsaW5lU2VuZFF1ZXVlOiBbXSBhcyAoKF8/OiB1bmtub3duKSA9PiB2b2lkKVtdLFxuXG4gICAgLyoqIEBwcml2YXRlIEludGVybmFsIHNoYXJkIG1hcC5cbiAgICAgKiBPbmx5IHVzZSB0aGlzIG1hcCBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gcmVzb2x2ZSBpbnRlcm5hbCB3YWl0aW5nIHN0YXRlcy5cbiAgICAgKiBNYXBwZWQgYnkgU2VsZWN0ZWRFdmVudHMgPT4gUmVzb2x2ZUZ1bmN0aW9uXG4gICAgICovXG4gICAgcmVzb2x2ZXM6IG5ldyBNYXA8XCJSRUFEWVwiIHwgXCJSRVNVTUVEXCIgfCBcIklOVkFMSURfU0VTU0lPTlwiLCAocGF5bG9hZDogRGlzY29yZEdhdGV3YXlQYXlsb2FkKSA9PiB2b2lkPigpLFxuXG4gICAgLyoqIEBwcml2YXRlIEludGVybmFsIHNoYXJkIGZ1bmN0aW9uLlxuICAgICAqIE9ubHkgdXNlIHRoaXMgZnVuY3Rpb24gaWYgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nLlxuICAgICAqXG4gICAgICogU3RhcnQgc2VuZGluZyBoZWFydGJlYXQgcGF5bG9hZHMgdG8gRGlzY29yZCBpbiB0aGUgcHJvdmlkZWQgaW50ZXJ2YWwuXG4gICAgICovXG4gICAgc3RhcnRIZWFydGJlYXRpbmc6IGZ1bmN0aW9uIChpbnRlcnZhbDogbnVtYmVyKSB7XG4gICAgICByZXR1cm4gc3RhcnRIZWFydGJlYXRpbmdPdmVyd3JpdHRlbih0aGlzLCBpbnRlcnZhbCk7XG4gICAgfSxcblxuICAgIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzaGFyZCBmdW5jdGlvbi5cbiAgICAgKiBPbmx5IHVzZSB0aGlzIGZ1bmN0aW9uIGlmIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy5cbiAgICAgKlxuICAgICAqIFN0b3AgdGhlIGhlYXJ0YmVhdGluZyBwcm9jZXNzIHdpdGggZGlzY29yZC5cbiAgICAgKi9cbiAgICBzdG9wSGVhcnRiZWF0aW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc3RvcEhlYXJ0YmVhdGluZ092ZXJ3cml0dGVuKHRoaXMpO1xuICAgIH0sXG4gIH07XG59XG5cbi8vIGNvbnN0IHNoYXJkID0gY3JlYXRlU2hhcmQoe1xuLy8gICBpZDogMCxcbi8vICAgZ2F0ZXdheUNvbmZpZzoge1xuLy8gICAgIGNvbXByZXNzOiB0cnVlLFxuLy8gICAgIHVybDogXCJ3c3M6Ly9nYXRld2F5LmRpc2NvcmQuZ2dcIixcbi8vICAgICB2ZXJzaW9uOiAxMCxcbi8vICAgICBpbnRlbnRzOiAxIDw8IDEsXG4vLyAgICAgcHJvcGVydGllczoge1xuLy8gICAgICAgJG9zOiBcIkRpc2NvcmRlbm9cIixcbi8vICAgICAgICRicm93c2VyOiBcIkRpc2NvcmRlbm9cIixcbi8vICAgICAgICRkZXZpY2U6IFwiRGlzY29yZGVub1wiLFxuLy8gICAgIH0sXG4vLyAgICAgdG9rZW46IFRPS0VOLFxuLy8gICB9LFxuLy8gICB0b3RhbFNoYXJkczogMSxcbi8vICAgbWFrZVByZXNlbmNlOiAoc2hhcmRJZCkgPT4gKHtcbi8vICAgICBhY3Rpdml0aWVzOiBbXG4vLyAgICAgICB7XG4vLyAgICAgICAgIG5hbWU6IGBDYXJkcyBBZ2FpbnN0IEh1bWFuaXR5ICMke3NoYXJkSWR9YCxcbi8vICAgICAgICAgdHlwZTogMCxcbi8vICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuLy8gICAgICAgfSxcbi8vICAgICBdLFxuLy8gICAgIHN0YXR1czogXCJkbmRcIixcbi8vICAgfSksXG4vLyAgIHJlcXVlc3RJZGVudGlmeTogYXN5bmMgKCkgPT4ge30sXG4vLyB9KTtcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVTaGFyZCB7XG4gIC8qKiBJZCBvZiB0aGUgc2hhcmQgd2hpY2ggc2hvdWxkIGJlIGNyZWF0ZWQuICovXG4gIGlkOiBudW1iZXI7XG5cbiAgLyoqIEdhdGV3YXkgY29uZmlndXJhdGlvbiBmb3IgdGhlIHNoYXJkLiAqL1xuICBnYXRld2F5Q29uZmlnOiBQaWNrUGFydGlhbDxTaGFyZEdhdGV3YXlDb25maWcsIFwidG9rZW5cIj47XG5cbiAgLyoqIFRoZSB0b3RhbCBhbW91bnQgb2Ygc2hhcmRzIHdoaWNoIGFyZSB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggRGlzY29yZC4gKi9cbiAgdG90YWxTaGFyZHM6IG51bWJlcjtcblxuICAvKiogVGhpcyBmdW5jdGlvbiBjb21tdW5pY2F0ZXMgd2l0aCB0aGUgbWFuYWdlbWVudCBwcm9jZXNzLCBpbiBvcmRlciB0byBrbm93IHdoZXRoZXIgaXRzIGZyZWUgdG8gaWRlbnRpZnkuXG4gICAqIFdoZW4gdGhpcyBmdW5jdGlvbiByZXNvbHZlcywgdGhpcyBtZWFucyB0aGF0IHRoZSBzaGFyZCBpcyBhbGxvd2VkIHRvIHNlbmQgYW4gaWRlbnRpZnkgcGF5bG9hZCB0byBkaXNjb3JkLlxuICAgKi9cbiAgcmVxdWVzdElkZW50aWZ5OiAoc2hhcmRJZDogbnVtYmVyKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gIC8qKiBDYWxjdWxhdGUgdGhlIGFtb3VudCBvZiByZXF1ZXN0cyB3aGljaCBjYW4gc2FmZWx5IGJlIG1hZGUgcGVyIHJhdGUgbGltaXQgaW50ZXJ2YWwsXG4gICAqIGJlZm9yZSB0aGUgZ2F0ZXdheSBnZXRzIGRpc2Nvbm5lY3RlZCBkdWUgdG8gYW4gZXhjZWVkZWQgcmF0ZSBsaW1pdC5cbiAgICovXG4gIGNhbGN1bGF0ZVNhZmVSZXF1ZXN0cz86IHR5cGVvZiBjYWxjdWxhdGVTYWZlUmVxdWVzdHM7XG5cbiAgLyoqIENsb3NlIHRoZSBzb2NrZXQgY29ubmVjdGlvbiB0byBkaXNjb3JkIGlmIHByZXNlbnQuICovXG4gIGNsb3NlPzogdHlwZW9mIGNsb3NlO1xuXG4gIC8qKiBDb25uZWN0IHRoZSBzaGFyZCB3aXRoIHRoZSBnYXRld2F5IGFuZCBzdGFydCBoZWFydGJlYXRpbmcuXG4gICAqIFRoaXMgd2lsbCBub3QgaWRlbnRpZnkgdGhlIHNoYXJkIHRvIHRoZSBnYXRld2F5LlxuICAgKi9cbiAgY29ubmVjdD86IHR5cGVvZiBjb25uZWN0O1xuXG4gIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzaGFyZCBmdW5jdGlvbi5cbiAgICogT25seSB1c2UgdGhpcyBmdW5jdGlvbiBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAqXG4gICAqIEhhbmRsZSBhIGdhdGV3YXkgY29ubmVjdGlvbiBjbG9zZS5cbiAgICovXG4gIGhhbmRsZUNsb3NlPzogdHlwZW9mIGhhbmRsZUNsb3NlO1xuXG4gIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzaGFyZCBmdW5jdGlvbi5cbiAgICogT25seSB1c2UgdGhpcyBmdW5jdGlvbiBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAqXG4gICAqIEhhbmRsZSBhbiBpbmNvbWluZyBnYXRld2F5IG1lc3NhZ2UuXG4gICAqL1xuICBoYW5kbGVNZXNzYWdlPzogdHlwZW9mIGhhbmRsZU1lc3NhZ2U7XG5cbiAgLyoqIElkZW50aWZ5IHRoZSBzaGFyZCB0byB0aGUgZ2F0ZXdheS5cbiAgICogSWYgbm90IGNvbm5lY3RlZCwgdGhpcyB3aWxsIGFsc28gY29ubmVjdCB0aGUgc2hhcmQgdG8gdGhlIGdhdGV3YXkuXG4gICAqL1xuICBpZGVudGlmeT86IHR5cGVvZiBpZGVudGlmeTtcblxuICAvKiogQ2hlY2sgd2hldGhlciB0aGUgY29ubmVjdGlvbiB0byBEaXNjb3JkIGlzIGN1cnJlbnRseSBvcGVuLiAqL1xuICBpc09wZW4/OiB0eXBlb2YgaXNPcGVuO1xuXG4gIC8qKiBGdW5jdGlvbiB3aGljaCBjYW4gYmUgb3ZlcndyaXR0ZW4gaW4gb3JkZXIgdG8gZ2V0IHRoZSBzaGFyZHMgcHJlc2VuY2UuICovXG4gIG1ha2VQcmVzZW5jZT8oc2hhcmRJZDogbnVtYmVyKTogUHJvbWlzZTxTdGF0dXNVcGRhdGU+IHwgU3RhdHVzVXBkYXRlO1xuXG4gIC8qKiBUaGUgbWF4aW11bSBvZiByZXF1ZXN0cyB3aGljaCBjYW4gYmUgc2VuZCB0byBkaXNjb3JkIHBlciByYXRlIGxpbWl0IHRpY2suXG4gICAqIFR5cGljYWxseSB0aGlzIHZhbHVlIHNob3VsZCBub3QgYmUgY2hhbmdlZC5cbiAgICovXG4gIG1heFJlcXVlc3RzUGVyUmF0ZUxpbWl0VGljaz86IG51bWJlcjtcblxuICAvKiogVGhlIHByZXZpb3VzIHBheWxvYWQgc2VxdWVuY2UgbnVtYmVyLiAqL1xuICBwcmV2aW91c1NlcXVlbmNlTnVtYmVyPzogbnVtYmVyO1xuXG4gIC8qKiBJbiB3aGljaCBpbnRlcnZhbCAoaW4gbWlsbGlzZWNvbmRzKSB0aGUgZ2F0ZXdheSByZXNldHMgaXQncyByYXRlIGxpbWl0LiAqL1xuICByYXRlTGltaXRSZXNldEludGVydmFsPzogbnVtYmVyO1xuXG4gIC8qKiBBdHRlbXB0IHRvIHJlc3VtZSB0aGUgcHJldmlvdXMgc2hhcmRzIHNlc3Npb24gd2l0aCB0aGUgZ2F0ZXdheS4gKi9cbiAgcmVzdW1lPzogdHlwZW9mIHJlc3VtZTtcblxuICAvKiogU2VuZCBhIG1lc3NhZ2UgdG8gRGlzY29yZC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbaGlnaFByaW9yaXR5PWZhbHNlXSAtIFdoZXRoZXIgdGhpcyBtZXNzYWdlIHNob3VsZCBiZSBzZW5kIGFzYXAuXG4gICAqL1xuICBzZW5kPzogdHlwZW9mIHNlbmQ7XG5cbiAgLyoqIFNodXRkb3duIHRoZSBzaGFyZC5cbiAgICogRm9yY2VmdWxseSBkaXNjb25uZWN0IHRoZSBzaGFyZCBmcm9tIERpc2NvcmQuXG4gICAqIFRoZSBzaGFyZCBtYXkgbm90IGF0dGVtcHQgdG8gcmVjb25uZWN0IHdpdGggRGlzY29yZC5cbiAgICovXG4gIHNodXRkb3duPzogdHlwZW9mIHNodXRkb3duO1xuXG4gIC8qKiBAcHJpdmF0ZSBJbnRlcm5hbCBzaGFyZCBmdW5jdGlvbi5cbiAgICogT25seSB1c2UgdGhpcyBmdW5jdGlvbiBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAqXG4gICAqIFN0YXJ0IHNlbmRpbmcgaGVhcnRiZWF0IHBheWxvYWRzIHRvIERpc2NvcmQgaW4gdGhlIHByb3ZpZGVkIGludGVydmFsLlxuICAgKi9cbiAgc3RhcnRIZWFydGJlYXRpbmc/OiB0eXBlb2Ygc3RhcnRIZWFydGJlYXRpbmc7XG5cbiAgLyoqIEN1cnJlbnQgaW50ZXJuYWwgc3RhdGUgb2YgdGhlIHNoYXJkLiAqL1xuICBzdGF0ZT86IFNoYXJkU3RhdGU7XG5cbiAgLyoqIEBwcml2YXRlIEludGVybmFsIHNoYXJkIGZ1bmN0aW9uLlxuICAgKiBPbmx5IHVzZSB0aGlzIGZ1bmN0aW9uIGlmIHlvdSBrbm93IHdoYXQgeW91IGFyZSBkb2luZy5cbiAgICpcbiAgICogU3RvcCB0aGUgaGVhcnRiZWF0aW5nIHByb2Nlc3Mgd2l0aCBkaXNjb3JkLlxuICAgKi9cbiAgc3RvcEhlYXJ0YmVhdGluZz86IHR5cGVvZiBzdG9wSGVhcnRiZWF0aW5nO1xuXG4gIC8qKiBUaGUgc2hhcmQgcmVsYXRlZCBldmVudCBoYW5kbGVycy4gKi9cbiAgZXZlbnRzPzogU2hhcmRFdmVudHM7XG4gIC8qKiBUaGlzIGNvbnRhaW5zIGFsbCB0aGUgaGVhcnRiZWF0IGluZm9ybWF0aW9uICovXG4gIGhlYXJ0PzogU2hhcmRIZWFydDtcbiAgLyoqIEJ1Y2tldCBmb3IgaGFuZGxpbmcgc2hhcmQgcmVxdWVzdCByYXRlIGxpbWl0cy4gKi9cbiAgYnVja2V0PzogTGVha3lCdWNrZXQ7XG4gIC8qKiBDYWNoZSBmb3IgcGVuZGluZyBnYXRld2F5IHJlcXVlc3RzIHdoaWNoIHNob3VsZCBoYXZlIGJlZW4gc2VuZCB3aGlsZSB0aGUgZ2F0ZXdheSB3ZW50IG9mZmxpbmUuICovXG4gIG9mZmxpbmVTZW5kUXVldWU/OiBTaGFyZFNvY2tldFJlcXVlc3RbXTtcbiAgLyoqIFRoaXMgaXMgdXNlZCB0byByZXNvbHZlIGludGVybmFsIHdhaXRpbmcgc3RhdGVzLlxuICAgKiBNYXBwZWQgYnkgU2VsZWN0ZWRFdmVudHMgPT4gUmVzb2x2ZUZ1bmN0aW9uXG4gICAqL1xuICByZXNvbHZlcz86IFNoYXJkW1wicmVzb2x2ZXNcIl07XG59XG4iXX0=