import setupInteractionCommandPermChecks from "./commands.ts";
import editFollowupMessage from "./editFollowupMessage.ts";
export function sendInteractionResponse(bot) {
    const sendInteractionResponseOld = bot.helpers.sendInteractionResponse;
    bot.helpers.sendInteractionResponse = function (id, token, options) {
        if (options.data?.title !== undefined) {
            if (!bot.utils.validateLength(options.data.title, { min: 1, max: 45 })) {
                throw new Error("Invalid modal title. Must be between 1-45 characters long.");
            }
        }
        options.data?.choices?.every((choice) => {
            if (!bot.utils.validateLength(choice.name, { min: 1, max: 100 })) {
                throw new Error("Invalid application command option choice name. Must be between 1-100 characters long.");
            }
            if (typeof choice.value === "string" && (choice.value.length < 1 ||
                choice.value.length > 100)) {
                throw new Error("Invalid slash options choice value type.");
            }
        });
        return sendInteractionResponseOld(id, token, options);
    };
}
export default function setupInteractionPermChecks(bot) {
    setupInteractionCommandPermChecks(bot);
    editFollowupMessage(bot);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8saUNBQWlDLE1BQU0sZUFBZSxDQUFDO0FBQzlELE9BQU8sbUJBQW1CLE1BQU0sMEJBQTBCLENBQUM7QUFFM0QsTUFBTSxVQUFVLHVCQUF1QixDQUFDLEdBQWlCO0lBQ3ZELE1BQU0sMEJBQTBCLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztJQUV2RSxHQUFHLENBQUMsT0FBTyxDQUFDLHVCQUF1QixHQUFHLFVBQVUsRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPO1FBQ2hFLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLEtBQUssU0FBUyxFQUFFO1lBQ3JDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUU7Z0JBQ3RFLE1BQU0sSUFBSSxLQUFLLENBQ2IsNERBQTRELENBQzdELENBQUM7YUFDSDtTQUNGO1FBRUQsT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDdEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO2dCQUNoRSxNQUFNLElBQUksS0FBSyxDQUNiLHdGQUF3RixDQUN6RixDQUFDO2FBQ0g7WUFFRCxJQUNFLE9BQU8sTUFBTSxDQUFDLEtBQUssS0FBSyxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsRUFDNUI7Z0JBQ0EsTUFBTSxJQUFJLEtBQUssQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO2FBQzdEO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLDBCQUEwQixDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEQsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELE1BQU0sQ0FBQyxPQUFPLFVBQVUsMEJBQTBCLENBQUMsR0FBaUI7SUFDbEUsaUNBQWlDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvdFdpdGhDYWNoZSB9IGZyb20gXCIuLi8uLi9kZXBzLnRzXCI7XG5pbXBvcnQgc2V0dXBJbnRlcmFjdGlvbkNvbW1hbmRQZXJtQ2hlY2tzIGZyb20gXCIuL2NvbW1hbmRzLnRzXCI7XG5pbXBvcnQgZWRpdEZvbGxvd3VwTWVzc2FnZSBmcm9tIFwiLi9lZGl0Rm9sbG93dXBNZXNzYWdlLnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kSW50ZXJhY3Rpb25SZXNwb25zZShib3Q6IEJvdFdpdGhDYWNoZSkge1xuICBjb25zdCBzZW5kSW50ZXJhY3Rpb25SZXNwb25zZU9sZCA9IGJvdC5oZWxwZXJzLnNlbmRJbnRlcmFjdGlvblJlc3BvbnNlO1xuXG4gIGJvdC5oZWxwZXJzLnNlbmRJbnRlcmFjdGlvblJlc3BvbnNlID0gZnVuY3Rpb24gKGlkLCB0b2tlbiwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmRhdGE/LnRpdGxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghYm90LnV0aWxzLnZhbGlkYXRlTGVuZ3RoKG9wdGlvbnMuZGF0YS50aXRsZSwgeyBtaW46IDEsIG1heDogNDUgfSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiSW52YWxpZCBtb2RhbCB0aXRsZS4gTXVzdCBiZSBiZXR3ZWVuIDEtNDUgY2hhcmFjdGVycyBsb25nLlwiLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbnMuZGF0YT8uY2hvaWNlcz8uZXZlcnkoKGNob2ljZSkgPT4ge1xuICAgICAgaWYgKCFib3QudXRpbHMudmFsaWRhdGVMZW5ndGgoY2hvaWNlLm5hbWUsIHsgbWluOiAxLCBtYXg6IDEwMCB9KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJJbnZhbGlkIGFwcGxpY2F0aW9uIGNvbW1hbmQgb3B0aW9uIGNob2ljZSBuYW1lLiBNdXN0IGJlIGJldHdlZW4gMS0xMDAgY2hhcmFjdGVycyBsb25nLlwiLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBjaG9pY2UudmFsdWUgPT09IFwic3RyaW5nXCIgJiYgKGNob2ljZS52YWx1ZS5sZW5ndGggPCAxIHx8XG4gICAgICAgICAgY2hvaWNlLnZhbHVlLmxlbmd0aCA+IDEwMClcbiAgICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNsYXNoIG9wdGlvbnMgY2hvaWNlIHZhbHVlIHR5cGUuXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNlbmRJbnRlcmFjdGlvblJlc3BvbnNlT2xkKGlkLCB0b2tlbiwgb3B0aW9ucyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldHVwSW50ZXJhY3Rpb25QZXJtQ2hlY2tzKGJvdDogQm90V2l0aENhY2hlKSB7XG4gIHNldHVwSW50ZXJhY3Rpb25Db21tYW5kUGVybUNoZWNrcyhib3QpO1xuICBlZGl0Rm9sbG93dXBNZXNzYWdlKGJvdCk7XG59XG4iXX0=