/** Begin spawning shards. */ export function spawnShards(gateway) {
    // PREPARES THE MAX SHARD COUNT BY CONCURRENCY
    // if (manager.resharding.useOptimalLargeBotSharding) {
    //   // gateway.debug("GW DEBUG", "[Spawning] Using optimal large bot sharding solution.");
    //   manager.manager.totalShards = manager.calculateTotalShards(
    //     manager,
    //   );
    // }
    // PREPARES ALL SHARDS IN SPECIFIC BUCKETS
    gateway.prepareBuckets();
    // SPREAD THIS OUT TO DIFFERENT WORKERS TO BEGIN STARTING UP
    gateway.buckets.forEach(async (bucket, bucketId)=>{
        // gateway.debug("GW DEBUG", `2. Running forEach loop in spawnShards function.`);
        for (const worker of bucket.workers){
            // gateway.debug("GW DEBUG", `3. Running for of loop in spawnShards function.`);
            for (const shardId of worker.queue){
                await gateway.tellWorkerToIdentify(worker.id, shardId, bucketId);
            }
        }
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYXRld2F5SW50ZW50cyB9IGZyb20gXCIuLi8uLi90eXBlcy9zaGFyZWQudHNcIjtcbmltcG9ydCB7IGNyZWF0ZUxlYWt5QnVja2V0IH0gZnJvbSBcIi4uLy4uL3V0aWwvYnVja2V0LnRzXCI7XG5pbXBvcnQgeyBjcmVhdGVTaGFyZCB9IGZyb20gXCIuLi9zaGFyZC9jcmVhdGVTaGFyZC50c1wiO1xuaW1wb3J0IHsgU2hhcmQgfSBmcm9tIFwiLi4vc2hhcmQvdHlwZXMudHNcIjtcbmltcG9ydCB7IGNyZWF0ZUdhdGV3YXlNYW5hZ2VyLCBHYXRld2F5TWFuYWdlciB9IGZyb20gXCIuL2dhdGV3YXlNYW5hZ2VyLnRzXCI7XG5cbi8qKiBCZWdpbiBzcGF3bmluZyBzaGFyZHMuICovXG5leHBvcnQgZnVuY3Rpb24gc3Bhd25TaGFyZHMoZ2F0ZXdheTogR2F0ZXdheU1hbmFnZXIpIHtcbiAgLy8gUFJFUEFSRVMgVEhFIE1BWCBTSEFSRCBDT1VOVCBCWSBDT05DVVJSRU5DWVxuICAvLyBpZiAobWFuYWdlci5yZXNoYXJkaW5nLnVzZU9wdGltYWxMYXJnZUJvdFNoYXJkaW5nKSB7XG4gIC8vICAgLy8gZ2F0ZXdheS5kZWJ1ZyhcIkdXIERFQlVHXCIsIFwiW1NwYXduaW5nXSBVc2luZyBvcHRpbWFsIGxhcmdlIGJvdCBzaGFyZGluZyBzb2x1dGlvbi5cIik7XG4gIC8vICAgbWFuYWdlci5tYW5hZ2VyLnRvdGFsU2hhcmRzID0gbWFuYWdlci5jYWxjdWxhdGVUb3RhbFNoYXJkcyhcbiAgLy8gICAgIG1hbmFnZXIsXG4gIC8vICAgKTtcbiAgLy8gfVxuXG4gIC8vIFBSRVBBUkVTIEFMTCBTSEFSRFMgSU4gU1BFQ0lGSUMgQlVDS0VUU1xuICBnYXRld2F5LnByZXBhcmVCdWNrZXRzKCk7XG5cbiAgLy8gU1BSRUFEIFRISVMgT1VUIFRPIERJRkZFUkVOVCBXT1JLRVJTIFRPIEJFR0lOIFNUQVJUSU5HIFVQXG4gIGdhdGV3YXkuYnVja2V0cy5mb3JFYWNoKGFzeW5jIChidWNrZXQsIGJ1Y2tldElkKSA9PiB7XG4gICAgLy8gZ2F0ZXdheS5kZWJ1ZyhcIkdXIERFQlVHXCIsIGAyLiBSdW5uaW5nIGZvckVhY2ggbG9vcCBpbiBzcGF3blNoYXJkcyBmdW5jdGlvbi5gKTtcblxuICAgIGZvciAoY29uc3Qgd29ya2VyIG9mIGJ1Y2tldC53b3JrZXJzKSB7XG4gICAgICAvLyBnYXRld2F5LmRlYnVnKFwiR1cgREVCVUdcIiwgYDMuIFJ1bm5pbmcgZm9yIG9mIGxvb3AgaW4gc3Bhd25TaGFyZHMgZnVuY3Rpb24uYCk7XG5cbiAgICAgIGZvciAoY29uc3Qgc2hhcmRJZCBvZiB3b3JrZXIucXVldWUpIHtcbiAgICAgICAgYXdhaXQgZ2F0ZXdheS50ZWxsV29ya2VyVG9JZGVudGlmeSh3b3JrZXIuaWQsIHNoYXJkSWQsIGJ1Y2tldElkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BLDZCQUE2QixDQUM3QixPQUFPLFNBQVMsV0FBVyxDQUFDLE9BQXVCLEVBQUU7SUFDbkQsOENBQThDO0lBQzlDLHVEQUF1RDtJQUN2RCwyRkFBMkY7SUFDM0YsZ0VBQWdFO0lBQ2hFLGVBQWU7SUFDZixPQUFPO0lBQ1AsSUFBSTtJQUVKLDBDQUEwQztJQUMxQyxPQUFPLENBQUMsY0FBYyxFQUFFLENBQUM7SUFFekIsNERBQTREO0lBQzVELE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sTUFBTSxFQUFFLFFBQVEsR0FBSztRQUNsRCxpRkFBaUY7UUFFakYsS0FBSyxNQUFNLE1BQU0sSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFFO1lBQ25DLGdGQUFnRjtZQUVoRixLQUFLLE1BQU0sT0FBTyxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUU7Z0JBQ2xDLE1BQU0sT0FBTyxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2FBQ2xFO1NBQ0Y7S0FDRixDQUFDLENBQUM7Q0FDSiJ9