import { isContextApplicationCommand, makeOptionsForCommand, } from "./createApplicationCommand.ts";
export async function upsertApplicationCommand(bot, commandId, options, guildId) {
    const result = await bot.rest.runMethod(bot.rest, "PATCH", guildId
        ? bot.constants.routes.COMMANDS_GUILD_ID(bot.applicationId, guildId, commandId)
        : bot.constants.routes.COMMANDS_ID(bot.applicationId, commandId), isContextApplicationCommand(options)
        ? {
            name: options.name,
            type: options.type,
        }
        : {
            name: options.name,
            description: options.description,
            type: options.type,
            options: options.options ? makeOptionsForCommand(options.options) : undefined,
        });
    return bot.transformers.applicationCommand(bot, result);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXBzZXJ0QXBwbGljYXRpb25Db21tYW5kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidXBzZXJ0QXBwbGljYXRpb25Db21tYW5kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFHTCwyQkFBMkIsRUFDM0IscUJBQXFCLEdBQ3RCLE1BQU0sK0JBQStCLENBQUM7QUFPdkMsTUFBTSxDQUFDLEtBQUssVUFBVSx3QkFBd0IsQ0FDNUMsR0FBUSxFQUNSLFNBQWlCLEVBQ2pCLE9BQTJGLEVBQzNGLE9BQWdCO0lBRWhCLE1BQU0sTUFBTSxHQUFHLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQ3JDLEdBQUcsQ0FBQyxJQUFJLEVBQ1IsT0FBTyxFQUNQLE9BQU87UUFDTCxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxPQUFPLEVBQUUsU0FBUyxDQUFDO1FBQy9FLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxTQUFTLENBQUMsRUFDbEUsMkJBQTJCLENBQUMsT0FBTyxDQUFDO1FBQ2xDLENBQUMsQ0FBQztZQUNBLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtZQUNsQixJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7U0FDbkI7UUFDRCxDQUFDLENBQUM7WUFDQSxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7WUFDbEIsV0FBVyxFQUFFLE9BQU8sQ0FBQyxXQUFXO1lBQ2hDLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtZQUNsQixPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTO1NBQzlFLENBQ0osQ0FBQztJQUVGLE9BQU8sR0FBRyxDQUFDLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDMUQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQm90IH0gZnJvbSBcIi4uLy4uLy4uL2JvdC50c1wiO1xuaW1wb3J0IHtcbiAgQ3JlYXRlQXBwbGljYXRpb25Db21tYW5kLFxuICBDcmVhdGVDb250ZXh0QXBwbGljYXRpb25Db21tYW5kLFxuICBpc0NvbnRleHRBcHBsaWNhdGlvbkNvbW1hbmQsXG4gIG1ha2VPcHRpb25zRm9yQ29tbWFuZCxcbn0gZnJvbSBcIi4vY3JlYXRlQXBwbGljYXRpb25Db21tYW5kLnRzXCI7XG5pbXBvcnQgeyBEaXNjb3JkQXBwbGljYXRpb25Db21tYW5kIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzL2Rpc2NvcmQudHNcIjtcbmltcG9ydCB7IEF0TGVhc3RPbmUgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXMvc2hhcmVkLnRzXCI7XG5cbi8qKlxuICogRWRpdCBhbiBleGlzdGluZyBhcHBsaWNhdGlvbiBjb21tYW5kLiBJZiB0aGlzIGNvbW1hbmQgZGlkIG5vdCBleGlzdCwgaXQgd2lsbCBjcmVhdGUgaXQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cHNlcnRBcHBsaWNhdGlvbkNvbW1hbmQoXG4gIGJvdDogQm90LFxuICBjb21tYW5kSWQ6IGJpZ2ludCxcbiAgb3B0aW9uczogQXRMZWFzdE9uZTxDcmVhdGVBcHBsaWNhdGlvbkNvbW1hbmQ+IHwgQXRMZWFzdE9uZTxDcmVhdGVDb250ZXh0QXBwbGljYXRpb25Db21tYW5kPixcbiAgZ3VpbGRJZD86IGJpZ2ludCxcbikge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBib3QucmVzdC5ydW5NZXRob2Q8RGlzY29yZEFwcGxpY2F0aW9uQ29tbWFuZD4oXG4gICAgYm90LnJlc3QsXG4gICAgXCJQQVRDSFwiLFxuICAgIGd1aWxkSWRcbiAgICAgID8gYm90LmNvbnN0YW50cy5yb3V0ZXMuQ09NTUFORFNfR1VJTERfSUQoYm90LmFwcGxpY2F0aW9uSWQsIGd1aWxkSWQsIGNvbW1hbmRJZClcbiAgICAgIDogYm90LmNvbnN0YW50cy5yb3V0ZXMuQ09NTUFORFNfSUQoYm90LmFwcGxpY2F0aW9uSWQsIGNvbW1hbmRJZCksXG4gICAgaXNDb250ZXh0QXBwbGljYXRpb25Db21tYW5kKG9wdGlvbnMpXG4gICAgICA/IHtcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGUsXG4gICAgICB9XG4gICAgICA6IHtcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICAgICAgdHlwZTogb3B0aW9ucy50eXBlLFxuICAgICAgICBvcHRpb25zOiBvcHRpb25zLm9wdGlvbnMgPyBtYWtlT3B0aW9uc0ZvckNvbW1hbmQob3B0aW9ucy5vcHRpb25zKSA6IHVuZGVmaW5lZCxcbiAgICAgIH0sXG4gICk7XG5cbiAgcmV0dXJuIGJvdC50cmFuc2Zvcm1lcnMuYXBwbGljYXRpb25Db21tYW5kKGJvdCwgcmVzdWx0KTtcbn1cbiJdfQ==