import { requireBotChannelPermissions } from "../../permissions.ts";
export default function getArchivedThreads(bot) {
    const getArchivedThreadsOld = bot.helpers.getArchivedThreads;
    bot.helpers.getArchivedThreads = async function(channelId, options) {
        const channel = await bot.channels.get(channelId);
        if (channel) {
            await requireBotChannelPermissions(bot, channel, options?.type === "private" ? [
                "READ_MESSAGE_HISTORY",
                "MANAGE_THREADS"
            ] : [
                "READ_MESSAGE_HISTORY"
            ]);
        }
        return await getArchivedThreadsOld(channelId, options);
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3RXaXRoQ2FjaGUgfSBmcm9tIFwiLi4vLi4vLi4vZGVwcy50c1wiO1xuaW1wb3J0IHsgcmVxdWlyZUJvdENoYW5uZWxQZXJtaXNzaW9ucyB9IGZyb20gXCIuLi8uLi9wZXJtaXNzaW9ucy50c1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRBcmNoaXZlZFRocmVhZHMoYm90OiBCb3RXaXRoQ2FjaGUpIHtcbiAgY29uc3QgZ2V0QXJjaGl2ZWRUaHJlYWRzT2xkID0gYm90LmhlbHBlcnMuZ2V0QXJjaGl2ZWRUaHJlYWRzO1xuXG4gIGJvdC5oZWxwZXJzLmdldEFyY2hpdmVkVGhyZWFkcyA9IGFzeW5jIGZ1bmN0aW9uIChjaGFubmVsSWQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgYm90LmNoYW5uZWxzLmdldChjaGFubmVsSWQpO1xuXG4gICAgaWYgKGNoYW5uZWwpIHtcbiAgICAgIGF3YWl0IHJlcXVpcmVCb3RDaGFubmVsUGVybWlzc2lvbnMoXG4gICAgICAgIGJvdCxcbiAgICAgICAgY2hhbm5lbCxcbiAgICAgICAgb3B0aW9ucz8udHlwZSA9PT0gXCJwcml2YXRlXCIgPyBbXCJSRUFEX01FU1NBR0VfSElTVE9SWVwiLCBcIk1BTkFHRV9USFJFQURTXCJdIDogW1wiUkVBRF9NRVNTQUdFX0hJU1RPUllcIl0sXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBnZXRBcmNoaXZlZFRocmVhZHNPbGQoY2hhbm5lbElkLCBvcHRpb25zKTtcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxTQUFTLDRCQUE0QixRQUFRLHNCQUFzQixDQUFDO0FBRXBFLGVBQWUsU0FBUyxrQkFBa0IsQ0FBQyxHQUFpQixFQUFFO0lBQzVELE1BQU0scUJBQXFCLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQUFBQztJQUU3RCxHQUFHLENBQUMsT0FBTyxDQUFDLGtCQUFrQixHQUFHLGVBQWdCLFNBQVMsRUFBRSxPQUFPLEVBQUU7UUFDbkUsTUFBTSxPQUFPLEdBQUcsTUFBTSxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQUFBQztRQUVsRCxJQUFJLE9BQU8sRUFBRTtZQUNYLE1BQU0sNEJBQTRCLENBQ2hDLEdBQUcsRUFDSCxPQUFPLEVBQ1AsT0FBTyxFQUFFLElBQUksS0FBSyxTQUFTLEdBQUc7Z0JBQUMsc0JBQXNCO2dCQUFFLGdCQUFnQjthQUFDLEdBQUc7Z0JBQUMsc0JBQXNCO2FBQUMsQ0FDcEcsQ0FBQztTQUNIO1FBRUQsT0FBTyxNQUFNLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUN4RCxDQUFDO0NBQ0gsQ0FBQSJ9