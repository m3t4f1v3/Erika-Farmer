/** Handler used to determine max number of shards to use based upon the max concurrency. */ export function calculateTotalShards(gateway) {
    // Bots under 100k servers do not have access to total shards.
    if (gateway.manager.totalShards < 100) return gateway.manager.totalShards;
    // Calculate a multiple of `maxConcurrency` which can be used to connect to the gateway.
    return Math.ceil(gateway.manager.totalShards / // If `maxConcurrency` is 1 we can safely use 16.
    (gateway.gatewayBot.sessionStartLimit.maxConcurrency === 1 ? 16 : gateway.gatewayBot.sessionStartLimit.maxConcurrency)) * gateway.gatewayBot.sessionStartLimit.maxConcurrency;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYXRld2F5TWFuYWdlciB9IGZyb20gXCIuL2dhdGV3YXlNYW5hZ2VyLnRzXCI7XG5cbi8qKiBIYW5kbGVyIHVzZWQgdG8gZGV0ZXJtaW5lIG1heCBudW1iZXIgb2Ygc2hhcmRzIHRvIHVzZSBiYXNlZCB1cG9uIHRoZSBtYXggY29uY3VycmVuY3kuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVG90YWxTaGFyZHMoZ2F0ZXdheTogR2F0ZXdheU1hbmFnZXIpOiBudW1iZXIge1xuICAvLyBCb3RzIHVuZGVyIDEwMGsgc2VydmVycyBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gdG90YWwgc2hhcmRzLlxuICBpZiAoZ2F0ZXdheS5tYW5hZ2VyLnRvdGFsU2hhcmRzIDwgMTAwKSByZXR1cm4gZ2F0ZXdheS5tYW5hZ2VyLnRvdGFsU2hhcmRzO1xuXG4gIC8vIENhbGN1bGF0ZSBhIG11bHRpcGxlIG9mIGBtYXhDb25jdXJyZW5jeWAgd2hpY2ggY2FuIGJlIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgZ2F0ZXdheS5cbiAgcmV0dXJuIE1hdGguY2VpbChcbiAgICBnYXRld2F5Lm1hbmFnZXIudG90YWxTaGFyZHMgL1xuICAgICAgLy8gSWYgYG1heENvbmN1cnJlbmN5YCBpcyAxIHdlIGNhbiBzYWZlbHkgdXNlIDE2LlxuICAgICAgKGdhdGV3YXkuZ2F0ZXdheUJvdC5zZXNzaW9uU3RhcnRMaW1pdC5tYXhDb25jdXJyZW5jeSA9PT0gMVxuICAgICAgICA/IDE2XG4gICAgICAgIDogZ2F0ZXdheS5nYXRld2F5Qm90LnNlc3Npb25TdGFydExpbWl0Lm1heENvbmN1cnJlbmN5KSxcbiAgKSAqIGdhdGV3YXkuZ2F0ZXdheUJvdC5zZXNzaW9uU3RhcnRMaW1pdC5tYXhDb25jdXJyZW5jeTtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSw0RkFBNEYsQ0FDNUYsT0FBTyxTQUFTLG9CQUFvQixDQUFDLE9BQXVCLEVBQVU7SUFDcEUsOERBQThEO0lBQzlELElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsR0FBRyxFQUFFLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7SUFFMUUsd0ZBQXdGO0lBQ3hGLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FDZCxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FDekIsaURBQWlEO0lBQ2pELENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLEtBQUssQ0FBQyxHQUN0RCxFQUFFLEdBQ0YsT0FBTyxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLENBQUMsQ0FDM0QsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQztDQUN6RCJ9