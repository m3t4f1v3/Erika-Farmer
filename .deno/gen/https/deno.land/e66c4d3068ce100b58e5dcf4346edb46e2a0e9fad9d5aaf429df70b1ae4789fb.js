import { requireBotChannelPermissions } from "../permissions.ts";
export function getMessage(bot) {
    const getMessageOld = bot.helpers.getMessage;
    bot.helpers.getMessage = async function(channelId, messageId) {
        const channel = bot.channels.get(channelId);
        if (channel?.guildId) {
            requireBotChannelPermissions(bot, channel, [
                "READ_MESSAGE_HISTORY", 
            ]);
        }
        return await getMessageOld(channelId, messageId);
    };
}
export function getMessages(bot) {
    const getMessagesOld = bot.helpers.getMessages;
    bot.helpers.getMessages = async function(channelId, options) {
        const channel = bot.channels.get(channelId);
        if (channel?.guildId) {
            requireBotChannelPermissions(bot, channel, [
                "READ_MESSAGE_HISTORY",
                "VIEW_CHANNEL", 
            ]);
        }
        return await getMessagesOld(channelId, options);
    };
}
export default function setupGetMessagePermChecks(bot) {
    getMessage(bot);
    getMessages(bot);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3RXaXRoQ2FjaGUgfSBmcm9tIFwiLi4vLi4vZGVwcy50c1wiO1xuaW1wb3J0IHsgcmVxdWlyZUJvdENoYW5uZWxQZXJtaXNzaW9ucyB9IGZyb20gXCIuLi9wZXJtaXNzaW9ucy50c1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVzc2FnZShib3Q6IEJvdFdpdGhDYWNoZSkge1xuICBjb25zdCBnZXRNZXNzYWdlT2xkID0gYm90LmhlbHBlcnMuZ2V0TWVzc2FnZTtcblxuICBib3QuaGVscGVycy5nZXRNZXNzYWdlID0gYXN5bmMgZnVuY3Rpb24gKFxuICAgIGNoYW5uZWxJZCxcbiAgICBtZXNzYWdlSWQsXG4gICkge1xuICAgIGNvbnN0IGNoYW5uZWwgPSBib3QuY2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG4gICAgaWYgKGNoYW5uZWw/Lmd1aWxkSWQpIHtcbiAgICAgIHJlcXVpcmVCb3RDaGFubmVsUGVybWlzc2lvbnMoYm90LCBjaGFubmVsLCBbXG4gICAgICAgIFwiUkVBRF9NRVNTQUdFX0hJU1RPUllcIixcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBnZXRNZXNzYWdlT2xkKGNoYW5uZWxJZCwgbWVzc2FnZUlkKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1lc3NhZ2VzKGJvdDogQm90V2l0aENhY2hlKSB7XG4gIGNvbnN0IGdldE1lc3NhZ2VzT2xkID0gYm90LmhlbHBlcnMuZ2V0TWVzc2FnZXM7XG5cbiAgYm90LmhlbHBlcnMuZ2V0TWVzc2FnZXMgPSBhc3luYyBmdW5jdGlvbiAoXG4gICAgY2hhbm5lbElkLFxuICAgIG9wdGlvbnMsXG4gICkge1xuICAgIGNvbnN0IGNoYW5uZWwgPSBib3QuY2hhbm5lbHMuZ2V0KGNoYW5uZWxJZCk7XG4gICAgaWYgKGNoYW5uZWw/Lmd1aWxkSWQpIHtcbiAgICAgIHJlcXVpcmVCb3RDaGFubmVsUGVybWlzc2lvbnMoYm90LCBjaGFubmVsLCBbXG4gICAgICAgIFwiUkVBRF9NRVNTQUdFX0hJU1RPUllcIixcbiAgICAgICAgXCJWSUVXX0NIQU5ORUxcIixcbiAgICAgIF0pO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBnZXRNZXNzYWdlc09sZChjaGFubmVsSWQsIG9wdGlvbnMpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXR1cEdldE1lc3NhZ2VQZXJtQ2hlY2tzKGJvdDogQm90V2l0aENhY2hlKSB7XG4gIGdldE1lc3NhZ2UoYm90KTtcbiAgZ2V0TWVzc2FnZXMoYm90KTtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxTQUFTLDRCQUE0QixRQUFRLG1CQUFtQixDQUFDO0FBRWpFLE9BQU8sU0FBUyxVQUFVLENBQUMsR0FBaUIsRUFBRTtJQUM1QyxNQUFNLGFBQWEsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsQUFBQztJQUU3QyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxlQUN2QixTQUFTLEVBQ1QsU0FBUyxFQUNUO1FBQ0EsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEFBQUM7UUFDNUMsSUFBSSxPQUFPLEVBQUUsT0FBTyxFQUFFO1lBQ3BCLDRCQUE0QixDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUU7Z0JBQ3pDLHNCQUFzQjthQUN2QixDQUFDLENBQUM7U0FDSjtRQUVELE9BQU8sTUFBTSxhQUFhLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0tBQ2xELENBQUM7Q0FDSDtBQUVELE9BQU8sU0FBUyxXQUFXLENBQUMsR0FBaUIsRUFBRTtJQUM3QyxNQUFNLGNBQWMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLFdBQVcsQUFBQztJQUUvQyxHQUFHLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxlQUN4QixTQUFTLEVBQ1QsT0FBTyxFQUNQO1FBQ0EsTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEFBQUM7UUFDNUMsSUFBSSxPQUFPLEVBQUUsT0FBTyxFQUFFO1lBQ3BCLDRCQUE0QixDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUU7Z0JBQ3pDLHNCQUFzQjtnQkFDdEIsY0FBYzthQUNmLENBQUMsQ0FBQztTQUNKO1FBRUQsT0FBTyxNQUFNLGNBQWMsQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDakQsQ0FBQztDQUNIO0FBRUQsZUFBZSxTQUFTLHlCQUF5QixDQUFDLEdBQWlCLEVBQUU7SUFDbkUsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNsQixDQUFBIn0=