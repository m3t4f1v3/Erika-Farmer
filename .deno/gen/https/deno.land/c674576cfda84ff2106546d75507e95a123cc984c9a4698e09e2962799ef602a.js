import { separateOverwrites } from "../deps.ts";
export async function cloneChannel(bot, channel, reason) {
    if (!channel.guildId) {
        throw new Error(`Cannot clone a channel outside a guild`);
    }
    const createChannelOptions = {
        type: channel.type,
        bitrate: channel.bitrate,
        userLimit: channel.userLimit,
        rateLimitPerUser: channel.rateLimitPerUser,
        position: channel.position,
        parentId: channel.parentId,
        nsfw: channel.nsfw,
        name: channel.name,
        topic: channel.topic || undefined,
        permissionOverwrites: channel.permissionOverwrites.map((overwrite) => {
            const [type, id, allow, deny] = separateOverwrites(overwrite);
            return {
                id,
                type,
                allow: bot.utils.calculatePermissions(BigInt(allow)),
                deny: bot.utils.calculatePermissions(BigInt(deny)),
            };
        }),
    };
    return await bot.helpers.createChannel(channel.guildId, createChannelOptions, reason);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhbm5lbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjaGFubmVscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9DLGtCQUFrQixFQUFFLE1BQU0sWUFBWSxDQUFDO0FBR2xGLE1BQU0sQ0FBQyxLQUFLLFVBQVUsWUFBWSxDQUNoQyxHQUFRLEVBQ1IsT0FBZ0IsRUFDaEIsTUFBZTtJQUVmLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFO1FBQ3BCLE1BQU0sSUFBSSxLQUFLLENBQUMsd0NBQXdDLENBQUMsQ0FBQztLQUMzRDtJQUVELE1BQU0sb0JBQW9CLEdBQXVCO1FBQy9DLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtRQUNsQixPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU87UUFDeEIsU0FBUyxFQUFFLE9BQU8sQ0FBQyxTQUFTO1FBQzVCLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxnQkFBZ0I7UUFDMUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRO1FBQzFCLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUTtRQUMxQixJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7UUFDbEIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFLO1FBQ25CLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSyxJQUFJLFNBQVM7UUFDakMsb0JBQW9CLEVBQUUsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFO1lBQ25FLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUU5RCxPQUFPO2dCQUNMLEVBQUU7Z0JBQ0YsSUFBSTtnQkFDSixLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3BELElBQUksRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNuRCxDQUFDO1FBQ0osQ0FBQyxDQUFDO0tBQ0gsQ0FBQztJQUdGLE9BQU8sTUFBTSxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FDcEMsT0FBTyxDQUFDLE9BQVEsRUFDaEIsb0JBQW9CLEVBQ3BCLE1BQU0sQ0FDUCxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvdCwgQ2hhbm5lbCwgQ3JlYXRlR3VpbGRDaGFubmVsLCBzZXBhcmF0ZU92ZXJ3cml0ZXMgfSBmcm9tIFwiLi4vZGVwcy50c1wiO1xuXG4vKiogQ3JlYXRlIGEgY29weSBvZiBhIGNoYW5uZWwgKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9uZUNoYW5uZWwoXG4gIGJvdDogQm90LFxuICBjaGFubmVsOiBDaGFubmVsLFxuICByZWFzb24/OiBzdHJpbmcsXG4pIHtcbiAgaWYgKCFjaGFubmVsLmd1aWxkSWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjbG9uZSBhIGNoYW5uZWwgb3V0c2lkZSBhIGd1aWxkYCk7XG4gIH1cblxuICBjb25zdCBjcmVhdGVDaGFubmVsT3B0aW9uczogQ3JlYXRlR3VpbGRDaGFubmVsID0ge1xuICAgIHR5cGU6IGNoYW5uZWwudHlwZSxcbiAgICBiaXRyYXRlOiBjaGFubmVsLmJpdHJhdGUsXG4gICAgdXNlckxpbWl0OiBjaGFubmVsLnVzZXJMaW1pdCxcbiAgICByYXRlTGltaXRQZXJVc2VyOiBjaGFubmVsLnJhdGVMaW1pdFBlclVzZXIsXG4gICAgcG9zaXRpb246IGNoYW5uZWwucG9zaXRpb24sXG4gICAgcGFyZW50SWQ6IGNoYW5uZWwucGFyZW50SWQsXG4gICAgbnNmdzogY2hhbm5lbC5uc2Z3LFxuICAgIG5hbWU6IGNoYW5uZWwubmFtZSEsXG4gICAgdG9waWM6IGNoYW5uZWwudG9waWMgfHwgdW5kZWZpbmVkLFxuICAgIHBlcm1pc3Npb25PdmVyd3JpdGVzOiBjaGFubmVsLnBlcm1pc3Npb25PdmVyd3JpdGVzLm1hcCgob3ZlcndyaXRlKSA9PiB7XG4gICAgICBjb25zdCBbdHlwZSwgaWQsIGFsbG93LCBkZW55XSA9IHNlcGFyYXRlT3ZlcndyaXRlcyhvdmVyd3JpdGUpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgYWxsb3c6IGJvdC51dGlscy5jYWxjdWxhdGVQZXJtaXNzaW9ucyhCaWdJbnQoYWxsb3cpKSxcbiAgICAgICAgZGVueTogYm90LnV0aWxzLmNhbGN1bGF0ZVBlcm1pc3Npb25zKEJpZ0ludChkZW55KSksXG4gICAgICB9O1xuICAgIH0pLFxuICB9O1xuXG4gIC8vQ3JlYXRlIHRoZSBjaGFubmVsIChhbHNvIGhhbmRsZXMgcGVybWlzc2lvbnMpXG4gIHJldHVybiBhd2FpdCBib3QuaGVscGVycy5jcmVhdGVDaGFubmVsKFxuICAgIGNoYW5uZWwuZ3VpbGRJZCEsXG4gICAgY3JlYXRlQ2hhbm5lbE9wdGlvbnMsXG4gICAgcmVhc29uLFxuICApO1xufVxuIl19